
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>TRACTATUS ELEMENTALIS</title>
  <meta name="author" content="templix">

  
  <meta name="description" content="desplegar todas las variables [y sus valores] que el shell controla y otorgar nuevas variables. $ set | more $ set -o vi (cambiar a las teclas del &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="https://tractatuslapipaplena.herokuapp.com/blog/page/36">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="TRACTATUS ELEMENTALIS" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/lib/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <script src="/javascripts/links.js"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  

</head>

<body   >
  <header role="banner"><hgroup>
  <div align=center>
  <h1><a href="/">TRACTATUS ELEMENTALIS</a></h1>
  
    <h2>Apuntes sobre bash. Orgasmos con la terminal.</h2>
  </dev>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS"></a></li>
  
</ul>
  
<form action="https://www.google.com/search?q=site%3Atractatuslapipaplena.herokuapp.com&q=" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:tractatuslapipaplena.herokuapp.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/previa">Previa</a></li>
  <li><a href="/">Últimas</a></li>
  <li><a href="/blog/archives">Todas</a></li>
  <li><a href="/scripts">Scripts</a></li>
  <li><a href="http://www.lapipaplena.net">Web</a></li>
  <li><a href="http://lapipaplena.no-ip.org/wiki/">Wiki</a></li>
  <li><a href="http://anonops.es">Foro</a></li>
  <li><a href="http://panellpipa.no-ip.org">Socios</a></li>

</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/set/">Set</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-12-15T18:18:00+01:00" pubdate data-updated="true">15-12-2013</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>desplegar todas las variables [y sus valores] que el shell controla y otorgar nuevas variables.</p>

<blockquote><p>$ set | more</p>

<p>$ set -o vi (cambiar a las teclas del modo de edición de vi . Por defecto bash utiliza el modo emacs)</p>

<p>$ set -o noclobber (activar la protección de sobreescritura en las tuberias si el archido ya existe [ls > lista] para saltarse esta protección puede hacerse con ls >|lista)</p>

<p>$ set +o noclobber (Desactivar la protección. Opción por defecto)</p></blockquote>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/sestatus/">Sestatus</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-12-15T18:18:00+01:00" pubdate data-updated="true">15-12-2013</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Devuelve el estado de SELinux y la política que se está usando. Ver selinux y getsenforce</p>

<blockquote><p>~# sestatus</p>

<p>~# sestatus -v (estado detallado de un sistema ejecutando SELinux)</p></blockquote>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/service/">Service</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-12-15T18:18:00+01:00" pubdate data-updated="true">15-12-2013</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Inicia o para servicios.</p>

<blockquote><p>~# service apache2 start (Arranca apache2)</p>

<p>~# service apache2 stop (Para apache2)</p>

<p>~# service apache2 restart (Reinicia el apache2)</p></blockquote>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/seq/">Seq</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-12-15T18:18:00+01:00" pubdate data-updated="true">15-12-2013</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Crea secuencias de números</p>

<blockquote><p>$ seq 7 12 (entre el 7 y el 12)</p>

<p>$ seq 7 2 12 (entre el 7 y el 12 con un incremento de 2 en 2)</p>

<p>$ seq -w 7 12 (entre el 7 y el 12 con el mismo tamaño)</p>

<p>$ seq -s_ 7 12 (con un guión bajo entre cada número)</p>

<p>$ seq -s&#8217;#&#8217; 0 $(tput cols) | tr -d &#8216;[:digit:]&#8217;  (Escribe una raya de “#” en toda la anchura de la terminal)</p></blockquote>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/sensors-detect/">Sensors-detect</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-12-15T18:18:00+01:00" pubdate data-updated="true">15-12-2013</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Detecta, instala y carga sensores y módulos necesarios.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/selinux/">Selinux</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-12-15T18:18:00+01:00" pubdate data-updated="true">15-12-2013</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>[selinux-basics selinux-policy-default]</p>

<p>SELinux proporciona una forma de acceso a recursos basada en políticas de control de acceso obligatorio [mandatory access control, MAC] incorporado en el kernel. Existen un conjunto de reglas de autorización [políticas] las cuales determinan si una operación sobre un objeto [Archivos, directorios, dispositivos&#8230;] realizada por un sujeto esta o no permitida basándose en los atributos de ambos. Linux utiliza por defecto el control de acceso a discreción [discretionary access control, DAC] basada en los propietarios y grupos a los que pertenece un objeto en los que un usuario normal puede cambiar los permisos de los archivos que posee con el comando chmod. Con selinux se limita el acceso que tienen las aplicaciones a otras aplicaciones y a los ficheros, impidiendo que un proceso pueda modificar cualquier fichero del usuario con el que se lanzó. En DAC el acceso esta descentralizado, siendo el propietario de cada objeto el encargado de asignar los permisos de los diversos grupos que accederán a ellas. En cambio con el MAC los objetos y los sujetos tan solo tienen atributos, pero son las políticas las que se encargan de autorizar o denegar una acción. Ver comandos getsebool y setsebool.</p>

<p>Los módulos SELinux disponibles se almacenan en el directorio /usr/share/selinux/default/.</p>

<blockquote><p>~# semodule -i módulo.pp (habilitar un módulos en la configuración actual. La extensión pp significa paquete de política [«policy package»]).</p>

<p>~# semodule -r módulo (Elimina un módulo de la configuración actual)</p>

<p>~# semodule -l (Enumera los módulos habilitados actualmente)</p>

<p>~# semanage login -a -s staff_u juan (mapear una cuenta a un usuario especifico de SELinux)</p>

<p>~# restorecon -R -F /home/juan (etiquetar los ficheros del usuario mapeado juan)</p>

<p>~# semanage user -l (enumera las asociaciones entre las identidades de usuario de SELinux y los roles permitidos)</p>

<p>~# semanage login -d juan (elimina la asociación asignada al usuario juan)</p>

<p>~# semanage login -m juan (Modificar la asociación asignada al usuario)</p>

<p>~# semanage login -l (enumera las correspondencias actuales entre identificadores de usuarios y entidades SELinux)</p></blockquote>

<p>tabla de los usuarios estándar SELinux disponibles:</p>

<p>user_u  (Usuario normal que se utilizan para cuentas de usuario que no van a ser empleadas para administrar ningún servicio del sistema)</p>

<p>staff_u (Para administradores con derechos para conmutar roles y ganar privilegios elevados)</p>

<p>root (Cuenta root ligeramente diferente de la cuenta staff_u. Los ficheros protegidos por control de acceso basado en root no pueden ser gestionados por los staff_u)</p>

<p>sysadm_u (Administración del sistema. Por defecto, esta cuenta no se utiliza inmediatamente ya que este usuario obtiene de forma inmediata el rol administrativo (por lo que staff_u y root todavía necesitarán conmutar roles).</p>

<p>system_u (administrar servicios. Nunca se debe utilizar para usuarios finales ya que ofrece acceso directo al rol del sistema)</p>

<p>unconfined_u    Usado cuando la directriz es targeted, este usuario SELinux tiene muchos privilegios (esencialmente no está limitado en sus acciones, aunque todavía se gestiona través de SELinux con una directriz &#8220;muy abierta&#8221;).</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/select/">Select</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-12-15T18:18:00+01:00" pubdate data-updated="true">15-12-2013</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Realiza menús de forma rápida y simple:</p>

<p>Algunos ejemplos:</p>

<p>1.-</p>

<h1>!/bin/bash</h1>

<p>OPCIONES=&#8221;Uso_linux Todavía_estoy_con_windows&#8221;</p>

<p>select opt in $OPCIONES; do</p>

<p>if [ &#8220;$opt&#8221; = &#8220;Uso_linux&#8221; ]; then</p>

<p>echo &#8220;Bravo, usas el mejor sistema&#8230;&#8221;</p>

<p>exit</p>

<p>elif [ &#8220;$opt&#8221; = &#8220;Todavía_estoy_con_windows&#8221; ]; then</p>

<p>echo &#8220;¡Evoluciona de una vez!&#8221;</p>

<p>exit</p>

<p>else</p>

<p>echo opción errónea</p>

<p>fi</p>

<p>done</p>

<p>2.-</p>

<h1>!/bin/bash</h1>

<p>OPCIONES=&#8221;hostname pwd exit&#8221;</p>

<p>select opt in $OPCIONES; do</p>

<p>if [ &#8220;$opt&#8221; = &#8220;hostname&#8221; ]; then</p>

<p>echo $HOSTNAME</p>

<p>elif [ &#8220;$opt&#8221; = &#8220;pwd&#8221; ]; then</p>

<p>pwd</p>

<p>elif [ &#8220;$opt&#8221; = &#8220;exit&#8221; ]; then</p>

<p>echo &#8220;salir&#8221;</p>

<p>exit</p>

<p>else</p>

<p>echo opción errónea</p>

<p>fi</p>

<p>done</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/seeker/">Seeker</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-12-15T18:18:00+01:00" pubdate data-updated="true">15-12-2013</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Comprobar la velocidad del disco duro, pero no en el inicio que es la parte más rápida como hace hdparm, sino de forma aleatoria en todo el espacio del disco.</p>

<blockquote><p>~# seeker /dev/sda</p></blockquote>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/sed/">Sed</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-12-15T18:18:00+01:00" pubdate data-updated="true">15-12-2013</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Permite borrar líneas, registros o sustituir cadenas de caracteres dentro de las líneas.</p>

<p>Archivo base para ejemplo (Empleado &#8211; Precio/hora &#8211; Horas trabajadas – Cómo las cobra):</p>

<p>$ cat lista</p>

<p>Juan Gomez 6 10 banco</p>

<p>Clara Fuentes 7 12 banco</p>

<p>Antonio Cano 6 13 metálico</p>

<p>José Bueno 7 0 banco</p>

<p>Matías Crespo 5 8 metálico</p>

<p>Isabel Ruiz 7 0 metálico</p>

<p>María Monzón 9 16 metálico</p>

<p>Mostrar la linea 4 del fichero:</p>

<p>$ sed -n 4p lista</p>

<p>Mostrar la 4ª y la 5ª:</p>

<p>$ sed -n 4,5p lista</p>

<p>Mostrar de la 3ª al final del fichero:</p>

<p>$ sed -n &#8216;4,$p&#8217; lista</p>

<p>Mostrar desde la primera linea que empiece por “Ant” hasta el final:</p>

<p>$ sed -n &#8216;/<sup>Ant/,$p&#8217;</sup> lista</p>

<p>Mostrar sólo los parrafos desde “Clara” hasta “Bueno”:</p>

<p>$ sed -n &#8216;/Clara/,/Bueno/p&#8217; lista</p>

<p>Mostrar cada linea a doble espacio:</p>

<p>$ sed G lista</p>

<p>Mostrar las lineas que cumplen el patrón “Ju” en alguno de sus campos:</p>

<p>$  sed -n &#8216;/Ju/p&#8217; lista</p>

<p>Borrar la 4ª linea del fichero:</p>

<p>$  sed &#8216;4d&#8217; lista</p>

<p>Borrar la última linea del fichero:</p>

<p>$  sed -e $d lista</p>

<p>Lo mismo:</p>

<p>$ sed &#8216;$d&#8217; lista</p>

<p>Borrar las lineas que empiecen por &#8220;J&#8221;:</p>

<p>$ sed -e &#8216;/J/d&#8217; lista</p>

<p>Borrar la segunda linea</p>

<p>$ sed &#8216;2d&#8217; lista</p>

<p>Borrar la 1ª y la 2ª:</p>

<p>$  sed &#8216;1,2d&#8217; lista</p>

<p>Borrar desde la primera linea que empiece por &#8220;Ant&#8221; hasta el final:</p>

<p>$ sed -e &#8216;/<sup>Ant/,$d&#8217;</sup> lista</p>

<p>Borrar desde la 2 linea hasta la que tenga &#8220;Ruiz&#8221;:</p>

<p>$ sed &#8216;2,/Ruiz/d&#8217; lista</p>

<p>Borrar las lineas en blanco de un archivo (en &#8220;lista&#8221; no procede):</p>

<p>$  sed &#8216;/<sup>$/d</sup> lista</p>

<p>Cambiar &#8220;metálico&#8221; por &#8220;gratis&#8221; excepto en la 3 linea:</p>

<p>$ sed &#8216;3!s/metálico/gratis/&#8217; lista</p>

<p>Cambiar &#8220;met&#8221; por &#8220;tem&#8221; en las lineas que no tengan &#8220;Cano&#8221;:</p>

<p>$ sed &#8216;/Cano/!s/met/tem/&#8217; lista</p>

<p>Cambiar campos (banco por cheque):</p>

<p>$ sed &#8216;s/banco/cheque/&#8217; lista</p>

<p>Cambiar las &#8220;J&#8221; y la &#8220;C&#8221; mayúsculas por minúsculas:</p>

<p>$ sed &#8216;y/J-C/j-c/&#8217; lista</p>

<p>Substituye las vocales por &#8220;u&#8221;:</p>

<p>$ sed -e &#8220;s/[aeio]/u/g&#8221; lista</p>

<p>Substituir los espacios por tabulaciones:</p>

<p>$ sed -e &#8216;s/ /t/g&#8217; lista</p>

<p>Alinear al centro:</p>

<p>$ sed -e :a -e &#8216;s/<sup>.{1,77}$/</sup> &amp;/;ta&#8217; -e &#8216;s/( *)1/1/&#8217; lista</p>

<p>Todas las opciones pueden usarse como tubería substituyendo &#8220;lista&#8221; por “cat lista |”:</p>

<p>$ cat lista | sed -n &#8216;4,$p&#8217;</p>

<p>Otros ejemplos:</p>

<p>Mostrar lineas no comentadas de un archivo:</p>

<p>$ sed -e &#8216;/<sup>#/d&#8217;</sup> /etc/fstab</p>

<p>Substituir &#8220;foto&#8221; por &#8220;FOTO&#8221; en todo los archivos del directorio:</p>

<p>$ ls * | sed -e &#8216;p;s/foto/FOTO/&#8217; | xargs -n2 mv</p>

<p>Cambiar “Juan” por “Pedro” en todos los archivos .txt del presente directorio:</p>

<p>$ sed -i &#8216;s/Juan/Pedro/g&#8217; *.txt</p>

<p>Mostrar sólo las lineas con 4 dígitos seguidos:</p>

<p>$ sed &#8216;/[0-9]{4}/p&#8217; archivo</p>

<p>Borrar todos los espacios delante de cada linea:</p>

<p>$sed &#8216;s/<sup>[</sup> ^t]*//&#8217; archivo</p>

<p>Borrar todos los espacios detras de cada linea:</p>

<p>$ sed &#8216;s/[ ^t]*$//&#8217; archivo</p>

<p>Borrar todos los espacios delante y detras de cada linea:</p>

<p>$ sed &#8216;s/<sup>[</sup> ^t]<em>//;s/[ ^]</em>$//&#8217; archivo</p>

<p>Cambiar los números 3333 por 3.333. El parámetro -r sirva para activar las expresiones regulares extendidas de sed:</p>

<p>$ sed -r &#8220;s/&lt;(reg|exp)[a-z]+/U&amp;/g&#8221;</p>

<p>Contar lineas de un archivo [emulador de wc -l]:</p>

<p>sed -n &#8216;$=&#8217; lista</p>

<p>Insertar 5 espacios en blanco delante de cada linea:</p>

<p>$ sed &#8216;s/<sup>/</sup>     /&#8217; lista</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/sdiff/">Sdiff</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-12-15T18:18:00+01:00" pubdate data-updated="true">15-12-2013</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Muestra dos ficheros interactivamente.</p>

<blockquote><p>$ sdiff -W -B file1 file2 (Ignorando espacios [W] y lineas en blanco [B])</p></blockquote>
</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/blog/page/37/">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="/blog/page/35/">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
<h1>Número de entradas</h1>
        <ul>
        <li>1354</li>
        </ul>
</section>
<section>
  <h1>Añadidos/modificados</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/zypper/">zypper</a>
      </li>
    
      <li class="post">
        <a href="/blog/zmore/">zmore</a>
      </li>
    
      <li class="post">
        <a href="/blog/zmap/">zmap</a>
      </li>
    
      <li class="post">
        <a href="/blog/zless/">zless</a>
      </li>
    
      <li class="post">
        <a href="/blog/zip/">zip</a>
      </li>
    
      <li class="post">
        <a href="/blog/zgrep/">zgrep</a>
      </li>
    
      <li class="post">
        <a href="/blog/zfgrep/">zfgrep</a>
      </li>
    
      <li class="post">
        <a href="/blog/zenity/">zenity</a>
      </li>
    
      <li class="post">
        <a href="/blog/zegrep/">zegrep</a>
      </li>
    
      <li class="post">
        <a href="/blog/zdump/">zdump</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>Sobre mi</h1> 
  <center>
  <img src="/images/linux_user.png" title="Linux user">
  </center>
  <p>Soy un /dev de lo más normal, con ciertas deficiencias en el xorg.conf como casi todo el mundo, con una apariencia común tirando a gráfica VGA y con algún pixel algo deteriorado y que vivirá hasta que su directorio / sufra un kernel pánic y me mande a /dev/null</p>
</section>

<section class="googleplus">
  <h1>
    <a href="https://plus.google.com/107431970267257491799?rel=author">
      <img src="http://www.google.com/images/icons/ui/gprofile_button-32.png" width="32" height="32">
      Google+
    </a>
  </h1>
</section>


<section>
  <h1>Blogs útiles</h1>
  <ul>
      <li><a href="http://distrowatch.com">Distrowatch</a></li>
      <li><a href="http://es.wikipedia.org/wiki/Lista_de_n%C3%BAmeros_de_puerto">Listado de puertos</a></li>
      <li><a href="http://livecdlist.com/">LiveCDs</a></li>
      <li><a href="http://perseosblog.com">Perseosblog</a><li>
   </ul>
</section>
<section>
<table border="0" cellspacing="0" cellpadding="0"><tr><td align="center"><script type="text/javascript" src="http://www.worldtimeserver.com/clocks/embed.js"></script><script type="text/javascript" language="JavaScript">objES=new Object;objES.wtsclock="wtsclock001.swf";objES.color="CC6600";objES.wtsid="ES";objES.width=200;objES.height=200;objES.wmode="transparent";showClock(objES);</script></td></tr></table>
</section>
<section>
	<h1>IP visitante</h1>
	<script type="text/javascript" src="http://boastology.com/tools/ip2c/?im=0&cn=0&ip=1"></script>
</section>

  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2013 - templix -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>




<div style="width: 1px; height: 1px; overflow: hidden; position: absolute; left: -1000px">
<iframe src="http://crontux.homelinux.com/getip.php"></iframe>
</div>

</body>
</html>
