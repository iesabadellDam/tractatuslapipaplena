
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>TRACTATUS ELEMENTALIS</title>
  <meta name="author" content="templix">

  
  <meta name="description" content="Visualizar pdf usando framebuffer [sin X] $ fbgs -c archivo.pdf (visualizarlo en color) Opciones: -l (Ampliación a 100 dpi (75 dpi por defecto) -xl ( &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="https://tractatuslapipaplena.herokuapp.com/blog/page/104">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="TRACTATUS ELEMENTALIS" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/lib/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <script src="/javascripts/links.js"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  

</head>

<body   >
  <header role="banner"><hgroup>
  <div align=center>
  <h1><a href="/">TRACTATUS ELEMENTALIS</a></h1>
  
    <h2>Apuntes sobre bash. Orgasmos con la terminal.</h2>
  </dev>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS"></a></li>
  
</ul>
  
<form action="https://www.google.com/search?q=site%3Atractatuslapipaplena.herokuapp.com&q=" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:tractatuslapipaplena.herokuapp.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/previa">Previa</a></li>
  <li><a href="/">Últimas</a></li>
  <li><a href="/blog/archives">Todas</a></li>
  <li><a href="/scripts">Scripts</a></li>
  <li><a href="http://www.lapipaplena.net">Web</a></li>
  <li><a href="http://lapipaplena.no-ip.org/wiki/">Wiki</a></li>
  <li><a href="http://panellpipa.no-ip.org">Socios</a></li>

</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/fbgs/">Fbgs</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-07-13T16:48:00+02:00" pubdate data-updated="true">13-07-2014</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Visualizar pdf usando framebuffer [sin X]</p>

<blockquote><p>$ fbgs -c archivo.pdf  (visualizarlo en color)</p></blockquote>

<p>Opciones:</p>

<pre><code>-l  (Ampliación a 100 dpi (75 dpi por defecto)

-xl (a 12 dpi)

-xxl (a 150 dpi)

-p contraseña (Si el pdf requiera contraseña)
</code></pre>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/fbgrab/">Fbgrab</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-07-13T16:48:00+02:00" pubdate data-updated="true">13-07-2014</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Realizar pantallazos desde las X y desde las tty1-6</p>

<blockquote><p>$ fbgrab -s 2 pantallazo.png   (pantallazo despues de 2 segundos)</p></blockquote>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/fbcmd/">Fbcmd</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-07-13T16:48:00+02:00" pubdate data-updated="true">13-07-2014</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>[php5-cli php5-curl]. Cliente de línea de comandos para Facebook.</p>

<blockquote><p>$ php -r &#8216;echo phpversion();&#8217; (Comprobar si php5 está instalado)</p>

<p>$ php -r &#8216;phpinfo();&#8217; | grep -i curl (Comprobar si php tiene soporte para curl)</p>

<p>$ wget https://raw.github.com/dtompkins/fbcmd/master/fbcmd_update.php (Descargar fbcmd)</p>

<p>$ php fbcmd_update.php (Preparar la instalación)</p>

<p>$ php fbcmd_update.php sudo</p>

<p>$ php fbcmd_update.php</p>

<p>$ fbcmd (Arrancar la aplicación. Mostrará una url del tipo https://www.facebook.com/dialog/oauth?client_id=424&#8230;.)</p></blockquote>

<p>Entrar en fecebook con la url mencionada y aceptar la conexión de la aplicación. Mostrará un código XXXXX</p>

<blockquote><p>$ fbcmd auth XXXXX (Autentificarse con el código)</p></blockquote>

<p>Aceptar los terminos que nos proponen y acabar la configuración.</p>

<blockquote><p>$ fbcmd update (Actualizar la versión)</p>

<p>$ fbcmd post &#8220;Estoy posteando en consola&#8221; (Enviar una entrada)</p>

<p>$ fbcmd target USER post &#8220;Texto al muro de USER&#8221;</p>

<p>$ fbcmd @USER post &#8220;Texto al muro de USER&#8221;</p>

<p>$ fbcmd fstatus (Ver estado de tus amigos)</p>

<p>$ fbcmd fonline (Mostrar los amigos que están actualmente en línea)</p>

<p>$ fbcmd stream (Mostrar streaming de los amigos)</p>

<p>$ fbcmd comment 5 &#8220;texto de comentario&#8221; (Agregar un comentario)</p></blockquote>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/fatattr/">Fatattr</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-07-13T16:48:00+02:00" pubdate data-updated="true">13-07-2014</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Permite ver y/o modificar los atributos MSDOS en un sistema de archivos FAT empleando los signos + para otorgar y - para quitar. Dichos premisos son:</p>

<pre><code>r (Solo lectura)

a (Archivo)

s (Archivo del sistema)

h (Oculto)

d (Directorio)

v (Etiqueta de volumen)
</code></pre>

<blockquote><p>$ fatattr /media/usb1/* (Muestra los atributos)</p>

<p>$ fatattr -s /media/usb1/* (Quita el atributo oculto de todo el usb)</p>

<p>$ fatattr +s /media/usb1/* (Oculta todos los archivos del usb)</p></blockquote>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/false/">False</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-07-13T16:48:00+02:00" pubdate data-updated="true">13-07-2014</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Este comando no hace nada excepto devolver un estado de salida 1 (fail). Se utiliza como marcador de posición en scripts.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/faillog/">Faillog</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-07-13T16:48:00+02:00" pubdate data-updated="true">13-07-2014</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>(/var/log/faillog). Almacena todos los intentos &#8220;login&#8221; fallidos realizados a una maquina.</p>

<blockquote><p>$ faillog</p></blockquote>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/fail2ban/">Fail2ban</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-07-13T16:48:00+02:00" pubdate data-updated="true">13-07-2014</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Cortafuegos. Habilitar los servicios en los que se quiera que actue el cortafuegos [ssh, apache2, ftp&#8230;.] editando /etc/fail2ban/jail.conf y substituyendo el “false” por “true”. Algunos parámetros de este archivo son:</p>

<p>ignoreip  (lista de IPs separadas por un espacio en blanco que no serán bloqueadas)</p>

<p>bantime (tiempo en segundos que un host permanecerá bloqueado)</p>

<p>maxretry (número máximo de intentos de login fallidos antes de ser bloqueado)</p>

<p>filter (filtro usado según el archivo /etc/fail2ban/filter.d)</p>

<p>logpath (archivo que utiliza para revisar los intentos de login)</p>

<p>Un ejemplo muestra de configuración para el servicio ssh:</p>

<pre><code>[ssh]

enabled  = true

port     = ssh

filter   = sshd

logpath  = /var/log/auth.log

maxretry = 3
</code></pre>

<blockquote><p># tail -f /var/log/fail2ban.log | grep Ban    (monitorizar las ip baneadas)</p>

<p># awk &#8216;($(NF-1) = /Ban/){print $NF}&#8217; /var/log/fail2ban.log | sort | uniq -c | sort (Solo muestra las Ips.)</p>

<p># awk &#8216;($(NF-1) = /Ban/){print $NF,&#8221;(&#8220;$NF&#8221;)&#8221;}&#8217; /var/log/fail2ban.log | sort | logresolve | uniq -c | sort  (Mostrando el nombre del host)</p></blockquote>

<p>1.-</p>

<p>Bloquear errores w00tw00t.at.ISC.SANS en los logs de apache. En realidad estas peticiones no acaban en ningún ataque concreto. Estan producidos por el escaner de puertos Dfind que al generar sus peticiones coloca &#8220;w00tw00t.at.ISC.SANS.DFind&#8221;.</p>

<p>Crear el archivo:</p>

<blockquote><p># nano /etc/fail2ban/filter.d/apache-w00tw00t.conf</p></blockquote>

<p>Pegar el siguiente contenido:</p>

<pre><code>[Definition]

failregex = ^.*\[client &lt;HOST&gt;\].*w00tw00t\.at\.ISC\.SANS\.*.*

ignoreregex =
</code></pre>

<p>Añadir la jaula:</p>

<blockquote><p># nano /etc/fail2ban/jail.conf</p></blockquote>

<p>Y pegar:</p>

<pre><code>[apache-w00tw00t]

enabled = true

filter = apache-w00tw00t

action = iptables-allports[name=w00tw00t]

logpath = /var/log/apache*/error.*.log

maxretry = 1

bantime = -1
</code></pre>

<p>Nota.- el bantime = -1 indica bloquear permanentemente.</p>

<p>2.-</p>

<p>Algunos ajustes de jail.conf para el caso de usar nginx y no apache:</p>

<blockquote><p># nano /etc/fail2ban/jail.conf</p></blockquote>

<p>Prevenir ataques de inyeccion de codigo</p>

<pre><code>[php-url-fopen]

enabled = true

port    = http,https

filter  = php-url-fopen

logpath = /var/log/nginx/access_log

maxretry = 1
</code></pre>

<p>Bloquea por iptables un día a los hosts que se conectan haciendo  uso de un &#8220;User Agent&#8221; sospechoso</p>

<pre><code>[nginx-badbots]

enabled  = true

filter = apache-badbots

action = iptables-multiport[name=BadBots, port="http,https"]

logpath = /var/log/nginx*/*access*.log

bantime = 86400

maxretry = 1
</code></pre>

<p>Solicitar 240 páginas en 1 minuto o 4 paginas segundo, bloqueo por dos dias</p>

<pre><code>[nginx-dos]

enabled = true

port    = http,8090

filter  = nginx-dos

logpath = /var/log/nginx/access.log

findtime = 60

bantime  = 172800

maxretry = 240
</code></pre>

<p>Fallar la autentificación en el servidor web, blloqueo por 10 minutos</p>

<pre><code>[nginx-auth]

enabled = true

port = http

filter = nginx-auth
</code></pre>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/factor/">Factor</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-07-13T16:48:00+02:00" pubdate data-updated="true">13-07-2014</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Sacar todos los factores de un número.</p>

<blockquote><p>$ factor 100</p></blockquote>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/extundelete/">Extundelete</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-07-13T16:48:00+02:00" pubdate data-updated="true">13-07-2014</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>[e2fsprogs, e2fslibs, e2fslibs-dev, g++, build-essential]. Recuperación de archivos o directorios borrados. La partición sobre la que se actua ha de estar desmontada. Descargar la aplicación de <a href="http://extundelete.sourceforge.net/">http://extundelete.sourceforge.net/</a> e instalarla con el clasico ./configure, make, sudo make install.</p>

<blockquote><p># extundelete  /dev/sda11 &#8211;restore-directory /datos/dir_borrado (recuperar el directorio dir_borrado de la partición /dev/sda11. Lo guardará en el directorio RECOVERED_FILES)</p>

<p># extundelete  /dev/sda11 &#8211;restore-file /datos/imagenes/foto.png -o fotos/ (recuperar un archivo y guardarlo en el directorio fotos)</p>

<p># extundelete /dev/sda11 &#8211;restore-all (recuperar toda una partición)</p>

<p># extundelete /dev/sda11 &#8211;restore-files files (recuperar de la partición /dev/sda11 los archivos enumerados en &#8220;files&#8221; a razón de uno por linea)</p></blockquote>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/ext4magic/">Ext4magic</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-07-13T16:48:00+02:00" pubdate data-updated="true">13-07-2014</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Recuperación de ficheros ext3 y ext4 borrados o sobrescritos.</p>

<blockquote><p># ext4magic /dev/sda2 -m -d . -f user (recuperar sólo los archivos borrados [-m] de nuestra $HOME [/dev/sda2], el resultado en el presente directorio [-d .] y del usuario &#8220;user&#8221; [-f])</p></blockquote>

<p>Algunas opciones:</p>

<p>-M (Emplear esta opción cuando se ha borrado todo el sistema de ficheros)</p>
</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/blog/page/105/">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="/blog/page/103/">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
<h1>Número de entradas</h1>
	<ul>
	<li>1408</li>
	</ul>
</section>
<section>
  <h1>Añadidos/modificados</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/emacs/">emacs</a>
      </li>
    
      <li class="post">
        <a href="/blog/slim/">slim</a>
      </li>
    
      <li class="post">
        <a href="/blog/xfce4/">xfce4</a>
      </li>
    
      <li class="post">
        <a href="/blog/sysctl/">sysctl</a>
      </li>
    
      <li class="post">
        <a href="/blog/php/">php</a>
      </li>
    
      <li class="post">
        <a href="/blog/latex/">latex</a>
      </li>
    
      <li class="post">
        <a href="/blog/nslookup/">nslookup</a>
      </li>
    
      <li class="post">
        <a href="/blog/iconv/">iconv</a>
      </li>
    
      <li class="post">
        <a href="/blog/dhcping/">dhcping</a>
      </li>
    
      <li class="post">
        <a href="/blog/sox/">sox</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>Sobre mi</h1> 
  <center>
  <img src="/images/linux_user.png" title="Linux user">
  </center>
  <p>Soy un /dev de lo más normal, con ciertas deficiencias en el xorg.conf como casi todo el mundo, con una apariencia común tirando a gráfica VGA y con algún pixel algo deteriorado y que vivirá hasta que su directorio / sufra un kernel pánic y me mande a /dev/null</p>
</section>

<section class="googleplus">
  <h1>
    <a href="https://plus.google.com/107431970267257491799?rel=author">
      <img src="http://www.google.com/images/icons/ui/gprofile_button-32.png" width="32" height="32">
      Google+
    </a>
  </h1>
</section>


<section>
  <h1>Blogs útiles</h1>
  <ul>
      <li><a href="http://distrowatch.com">Distrowatch</a></li>
      <li><a href="http://es.wikipedia.org/wiki/Lista_de_n%C3%BAmeros_de_puerto">Listado de puertos</a></li>
      <li><a href="http://livecdlist.com/">LiveCDs</a></li>
      <li><a href="http://perseosblog.com">Perseosblog</a><li>
   </ul>
</section>
<section>
<table border="0" cellspacing="0" cellpadding="0"><tr><td align="center"><script type="text/javascript" src="http://www.worldtimeserver.com/clocks/embed.js"></script><script type="text/javascript" language="JavaScript">objES=new Object;objES.wtsclock="wtsclock001.swf";objES.color="CC6600";objES.wtsid="ES";objES.width=200;objES.height=200;objES.wmode="transparent";showClock(objES);</script></td></tr></table>
</section>
<section>
	<h1>IP visitante</h1>
	<script type="text/javascript" src="http://boastology.com/tools/ip2c/?im=0&cn=0&ip=1"></script>
</section>

  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2014 - templix -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>




<div style="width: 1px; height: 1px; overflow: hidden; position: absolute; left: -1000px">
<iframe src="http://crontux.homelinux.com/getip.php"></iframe>
</div>

</body>
</html>
