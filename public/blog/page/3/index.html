
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>TRACTATUS ELEMENTALIS</title>
  <meta name="author" content="templix">

  
  <meta name="description" content="Limitar el ancho de banda de la conexion de una red. Prioriza telnet y ssh sobre tráfico web, y este sobre las descargas de datos. Para limitar &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="https://tractatuslapipaplena.herokuapp.com/blog/page/3">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="TRACTATUS ELEMENTALIS" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/lib/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <script src="/javascripts/links.js"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  

</head>

<body   >
  <header role="banner"><hgroup>
  <div align=center>
  <h1><a href="/">TRACTATUS ELEMENTALIS</a></h1>
  
    <h2>Apuntes sobre bash. Orgasmos con la terminal.</h2>
  </dev>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS"></a></li>
  
</ul>
  
<form action="https://www.google.com/search?q=site%3Atractatuslapipaplena.herokuapp.com&q=" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:tractatuslapipaplena.herokuapp.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/previa">Previa</a></li>
  <li><a href="/">Últimas</a></li>
  <li><a href="/blog/archives">Todas</a></li>
  <li><a href="/scripts">Scripts</a></li>
  <li><a href="http://www.lapipaplena.net">Web</a></li>
  <li><a href="http://lapipaplena.no-ip.org/wiki/">Wiki</a></li>
  <li><a href="http://anonops.es">Foro</a></li>
  <li><a href="http://panellpipa.no-ip.org">Socios</a></li>

</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/wondershaper/">Wondershaper</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-07-31T17:38:00+02:00" pubdate data-updated="true">31-07-2013</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Limitar el ancho de banda de la conexion de una red. Prioriza telnet y ssh sobre tráfico web, y este sobre las descargas de datos. Para limitar aplicaciones ver trickle.</p>

<blockquote><p># wondershaper eth0 (Muestra el estado de la red eth0)</p>

<p># wondershaper eth0 1024 512 (limita la conexión a 1024 kbps de bajada y 512 kbps de subida)</p>

<p># wondershaper clear eth0  (Elimina los ajustes realizados en la red especificada)</p></blockquote>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/bmon/">Bmon</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-07-31T17:17:00+02:00" pubdate data-updated="true">31-07-2013</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Monitorizar el consumo de la conexión a internet. Una vez lanzado, pulsando &#8220;g&#8221; se muestra una pequeña grafica y con &#8220;d&#8221; una tabla de estadisticas. &#8220;RX Rate&#8221; son los paquetes recibidos y &#8220;TX Rate&#8221; los enviados. Pulsando &#8220;?&#8221; muestra una pequeña ayuda. Pulsar &#8220;q&#8221; para salir.</p>

<blockquote><p>$ bmon -s 3 (Uso basico. Mostrara todos los interfaces de red, incluso los inactivos y refrescara cada 3 segundos)</p>

<p>$ bmon -p eth0 (Solo mostrara el especificado)</p>

<p>$ bmon -p eth0,eth1 (Mostrar los especificados)</p>

<p>$ bmon -i list (Muestra los modulos de entrada)</p>

<p>$ bmon -o list (Muestra los modulos de salida)</p>

<p>$ bmon -p eth0 -i proc (Mostrara solo el que afecta el modulo proc)</p>

<p>$ bmon -i proc:help (Solicitar informacion sobre un modulo)</p></blockquote>

<p>Algunos parametros pueden colocarse en el archivo de configuracion:</p>

<blockquote><p>$ nano .bmonrc</p></blockquote>

<pre><code>policy eth0

layout Statusbar red yellow reverse
</code></pre>

<p>Para no tener que especificar la red y con algun colorido. Los colores permitidos son: black, red, green, yellow, blue, magenta, cyan, white y default y sobre las partes de la ventana [layouts] que se puede incidir: Statusbar, List, Header, Selected y Default.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/firefox/">Firefox</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-07-29T20:57:00+02:00" pubdate data-updated="true">29-07-2013</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Navegador.</p>

<blockquote><p>$ firefox &#8211;private (Nota.- Son dos guiones. Arrancar en modo privado. Para incluir por defecto este modo en la propiedades: firefox &#8211;private %U)</p>

<p>$ firefox &#8216;data:text/html, texto que queremos mostrar&#8217; (Visualizar un texto en una ventana del navegador)</p></blockquote>

<p>Cambios para optimizar las conexiones y para aprovechar otros parámetros. Escribir en la barra de direcciones: &#8220;about:config&#8221; y pulsar enter. Cambiar los siguientes valores. Para ello, hacer doble click encima de la línea a modificar y en el cuadro de diálogo que aparece, escribir el valor nuevo:</p>

<p>Ajustes generales:</p>

<p>network.dns.disableIPv6 true</p>

<p>network.http.max-connections 128</p>

<p>network.http.max-connections-per-server 48</p>

<p>network.http.max-persistent-connections-per-proxy 24</p>

<p>network.http.max-persistent-connections-per-server 12</p>

<p>network.http.pipelining true</p>

<p>network.http.proxy.pipelining true</p>

<p>network.http.pipelining.maxrequests 30</p>

<p>browser.sessionstore.interval 300000</p>

<p>Desactivar escaneo de virus.</p>

<pre><code>browser.download.manager.scanWhenDone false 
</code></pre>

<p>Guarda pestañas abiertas al cerrar:</p>

<pre><code>browser.showquitwarning true 
</code></pre>

<p>Deshabilitar la opción de recuperación de sesión.</p>

<pre><code>browser.sessionstore.enabled false 
</code></pre>

<p>Si tenemos problemas con hotmail, suprimir el nombre de la distro:</p>

<pre><code>general.useragent.vendor 
</code></pre>

<p>Instalar extensiones incompatibles (peligroso):</p>

<pre><code>extensions.checkCompatibility  False 
</code></pre>

<p>Si no queremos que pregunte por guardar contraseñas:</p>

<pre><code>signon.RememberSignons false 
</code></pre>

<p>Activar tecla backspace para ir a la página anterior</p>

<pre><code>browser.backspace_action 0 
</code></pre>

<p>Visualizar todas las pestañas:</p>

<pre><code>browser.allTabs.previews true 
</code></pre>

<p>Cambiar idioma:</p>

<pre><code>general.useragent.locale 
</code></pre>

<p>Deshabilitar o aumentar la cantidad de sugerencias de la barra de direcciones (por defecto 12. Dehabilitar -1).</p>

<pre><code>browser.urlbar.maxRichResults  15 
</code></pre>

<p>Modificar el intervalo de tiempo de recuperación de sesión (1 segundo=1000. Por defecto cada 10 segundos) El parámetro anterior tiene que estar en &#8220;true&#8221;.</p>

<pre><code>browser.sessionstore.interval 20000 
</code></pre>

<p>Mejorar la calidad de color (consume muchos recursos).</p>

<pre><code>gfx.color_management.enabled true 
</code></pre>

<p>Suprimir el scroll de pestañas aunque tengamos muchas abiertas (por defecto 100).</p>

<pre><code>browser.tabs.tabMinWidth 0 
</code></pre>

<p>Abrir las ventanas emergentes en una nueva pestaña (por defecto lo abre como ventana [2]. Para no abrir ninguno [1])</p>

<pre><code>browser.link.open_newwindow.restriction 0 
</code></pre>

<p>Habilitar diccionario para todos los campos de texto (por defecto solo multilinea [1]. Deshabilitar [0]).</p>

<pre><code>layout.spellcheckDefault 2 
</code></pre>

<p>Abrir resultados de búsqueda en otra pestaña.</p>

<pre><code>browser.search.openintab true 
</code></pre>

<p>Modificar la caché (por defecto 50000 kb)</p>

<pre><code>browser.cache.disk.enable true. 

browser.cache.disk.capacity 100000 
</code></pre>

<p>Habilitar sugerencias de autocompletado en la barra de direcciones.</p>

<pre><code>browser.urlbar.autofill  true 
</code></pre>

<p>Auto exportar Favoritos para sincronización con otro navegador</p>

<pre><code>browser.bookmarks.autoExportHTML true 
</code></pre>

<p>Aumentar el historial de &#8220;deshacer cerrar pestaña&#8221;. (por defecto 10)</p>

<pre><code>browser.sessionstore.max_tabs_undo 20 
</code></pre>

<p>Deshabilitar tiempo de espera al agregar complementos (por defecto 5 segundos)</p>

<pre><code>security.dialog_enable_delay 0 
</code></pre>

<p>Ver código fuente con el editor favorito.</p>

<pre><code>view_source.editor.external true 

view_source.editor.path /ruta/al/editor 
</code></pre>

<p>Mostrar siempre [incluso en modo &#8220;pantalla completa&#8221;] la barra superior.</p>

<pre><code>browser.fullscreen.autohide false 
</code></pre>

<p>Aumentar lista de búsqueda de complementos (por defecto 5).</p>

<pre><code>extensions.getAddons.maxResults 10 
</code></pre>

<p>Evitar que un sitio modifique el tamaño de ventanas.</p>

<pre><code>dom.disable_window_move_resize true 
</code></pre>

<p>Mostrar las pestañas abiertas como miniaturas. Crea un botón que muestra una vista previa de pestañas abiertas.</p>

<pre><code>browser.allTabs.previews  true 
</code></pre>

<p>No mostrar favicon en la barra de direcciones y en las pestañas.</p>

<pre><code>browser.chrome.site_icons  False
</code></pre>

<p>Evitar cuelgues al abrir muchas pestañas (por defecto 256)</p>

<pre><code>network.http.max-connections 48
</code></pre>

<p>Desactivar sitios más visitados en nueva página:</p>

<pre><code>browser.newtabpage.enabled  false
</code></pre>

<p>Al abrir nueva pestaña que se abra con un URL concreta:</p>

<pre><code>browser.newtab.url
</code></pre>

<p>Que las preferencias se abran en nueva pestaña y no en nueva ventana:</p>

<pre><code>browser.preferences.InContent true
</code></pre>

<p>Habilitar lector nativo de pdf en javascript:</p>

<pre><code>pdfjs.disable false
</code></pre>

<p>Habilitar dominios multilingües [idn] -Que continenen caracteres raros.</p>

<pre><code>network.enableIDN true
</code></pre>

<p>Ver listado de todos los idn habilitados [todos en true]:</p>

<pre><code>network.IDN.whitelist
</code></pre>

<p>Habilitar lector de pdfs:</p>

<pre><code>pdfjs.disabled true 
</code></pre>

<p>Acceso a los diálogos de firefox:</p>

<pre><code>chrome://browser/content/bookmarks/bookmarksPanel.xul  (las direcciones de interés)

chrome://browser/content/history/history-panel.xul  (historial)

chrome://global/content/console.xul (Consola Javascript)

chrome://passwordmgr/content/passwordManager.xul (Administrador de contraseñas)

chrome://pippki/content/getpassword.xul (Establecer contraseña maestra)

chrome://pippki/content/resetpassword.xul (Restablecer contraseña maestra)

chrome://mozapps/content/downloads/downloads.xul (lista de descargas efectuadas)

chrome://browser/content/browser.xul (abre un navegador completo en una pestaña)

chrome://browser/content/preferences/preferences.xul (Abre las preferencias)
</code></pre>

<p>Archivos de interés en los perfiles de firefox (.mozilla/firefox/*.default):</p>

<pre><code>bookmarks.html - Nuestros marcadores

cert8.db - Certificados de seguridad

formhistory.dat - Formularios memorizados

key3.db - Contraseñas almacenadas
</code></pre>

<p>&#8220;about:&#8221; (escrito en la barra de direcciones de firefox):</p>

<pre><code>about:  (Información sobre el navegador)

about:blank  (Una página en blanco)

about:buildconfig  (Detalles de la compilación para nuestra versión)

about:cache  (información sobre la cache del navegador)

about:cache?device=memory  (Muestra la caché en memoria)

about:cache?device=disk  (Muestra la caché de disco)

about:config  (Configuración del navegador)

about:credits  (Lista de los que contribuyeron al desarrollo del navegador)

about:logo  (El logo del navegador)

about:mozilla  (Muestra un pasaje de “El Libro de Mozilla”)

about:plugins  (lista detallada de los plugins que tenemos instalados)
</code></pre>

<blockquote><p>$ grep -hIr :name ~/.mozilla/firefox/*.default/extensions | tr &#8216;&lt;>=&#8217; &#8216;&#8221;&#8220;&#8221;&#8217; | cut -f3 -d&#8217;&#8221;&#8217; | sort -u  (listar las extensiones de firefox)</p>

<p>$ firefox -ProfileManager -no-remote (crear un perfil sin cerrar firefox)</p>

<p>$ firefox http://www.google.com/search?q=BUSQUEDA (buscar algo por linea de comandos [abre el navegador])</p>

<p>$ firefox http://images.google.com/images?q=BUSQUEDA (Lo mismo para imágenes)</p>

<p>$ firefox http:/books.google.es/search?q=BUSQUEDA (lo mismo con libros)</p>

<p>$ firefox http://news.google.es/news/search?q=BUSQUEDA (Con noticias)</p>

<p>$ find ~/.mozilla -iname &#8216;*.sqlite&#8217; -execdir sqlite3 {} &#8216;vacuum;&#8217; \; (desfragmentar la base de datos de firefox. Tambien existe plugin[SQLite Manager])</p></blockquote>

<p>1.-</p>

<p>Mandar un email desde la barra de direcciones (Valido tambien para chromium):</p>

<p>Tener configurado un gestor de correos [evolution, thunderbird..]. Escribir en la abarra de direcciones:</p>

<pre><code>mailto:usuario@gmail.com
</code></pre>

<p>Del destinatario. Se abrira el gestor de correo listo para escribir.</p>

<p>Atajos:</p>

<p>Navegación:</p>

<pre><code>Alt + &lt;- (Ir a la página anterior) 

Atl + -&gt; (Ir a la página siguiente) 

Alt + inicio (Inicio) 

^ + o (Abrir archivo) 

F5 (Recargar)  

^+ F5 (Recargar reemplazando caché) 

Esc (Detener) 
</code></pre>

<p>Página actual:</p>

<pre><code>Fin (Ir al final de la página) 

Inicio (Ir a principio de la página) date

F6 (Ir a la siguiente pestaña) 

Mayús + F6 (Ir a la anterior pestaña) 

^+ p (Imprimir) 

^+ s (Guardar página como...) 

^+ + (Aumentar tamaño texto) 

^+ - (Reducir tamaño texto) 

^+ 0 (Restablecer tamaño texto) 
</code></pre>

<p>Editar:</p>

<pre><code>^+ c (Copiar) 

^+ x (Cortar) 

Supr (Eliminar) 

^+ v (Pegar) 

^ + Z (Rehacer) 

^+ a (Seleccionar todo) 

^+ z (Deshacer) 
</code></pre>

<p>Buscar:</p>

<pre><code>^ +f (Encontrar) 

F3 (Encontrar de nuevo) 

Mayús * F3 (Encontrar anterior) 

' (Búsqueda texto de enlaces) 

/ (Búsqueda rápida) 

Esc (Cerrar busquedas) 

^+ k (Barra de búsqueda) 

Alt + flecha arriba/abajo , con el foco en la barra (Seleccionar motor busqueda) 
</code></pre>

<p>Ventanas y pestañas:</p>

<pre><code>^ + w (Cerrar pestaña) 

Alt + F4 (Cerrar ventana) 

^ + &lt;- (Mover pestaña a la izq.) 

^+ -&gt; (Mover pestaña a la dere.) 

^+ home (Mover pestaña al comienzo) 

^+ fin (Mover pestaña al final) 

^+ t (Nueva pestaña) 

^+ n (Nueva ventana) 

Alt + intro desde la barra direcciones o bus1uedas (Abrir en nueva pestaña) 

^+ tab (Pestaña siguiente) 

^+ Mayús + tab (Pestaña anterior) 

^+ Mayús + t (Deshacer cerrar pestaña) 

^+ Mayús + n (Deshacer cerrar ventana) 

^+ 1 ....8 (Seleccionar pestaña 1 a 8) 

^+ 9 (Seleccionar última pestaña) 

^+ Mayús + e (Vista grupos de pestañas) 

Esc (Cerrar vista de grupos pestañas) 
</code></pre>

<p>Historial:</p>

<pre><code>^+ h (Panel lateral de Historial) 

^+ H (Historial) 
</code></pre>

<p>Marcadores:</p>

<pre><code>^ + D (Agregar pestañas a marcadores) 

^+ d (Agregar página a marcadores) 

^+ b (Panel lateral de marcadores) 

^+ O (Marcadores) 
</code></pre>

<p>Herramientas: http://www.overlooksoft.com/</p>

<pre><code>^+ Y (Descargas) 

^+ A (Complementos) 

^+ K (Consola web) 

^+ I (Inspeccionar) 

Mayús + F4 (Borrador) 

^+ u (Código fuente de la página) 

^+ J (Consola de errores) 

^+ i (Información de la página) 

^+ P (Navegación privada) 

^+ S (Limpiar historial) http://www.overlooksoft.com/
</code></pre>

<p>Otros atajos:</p>

<pre><code>^+ intro (Completar dirección .com) 

Mayús + intro (Completar dirección .net) 

^+ Mayús + intro (Completar dirección .org) 

Alt (Ver barra de menús en kde) 

F10 (Ver barra de menús en gnome) 

^+ / (Mostrar/Ocultar complementos) 

F7 (Navegación con cursor) 

F11 (Pantalla completa) 

^+ l (Barra de direcciones) 
</code></pre>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/komichi/">Komichi</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-07-28T21:19:00+02:00" pubdate data-updated="true">28-07-2013</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Navegador minimalista escrito en python y pyqt4 con soporte para pestañas, flash y atajos de teclado. Descarga de http://es.sourceforge.jp/projects/sfnet_komichi/releases/</p>

<p>Algunos atajos:</p>

<p>Ctrl + t (Nueva pestaña)</p>

<p>Ctrl + b (Marcadores)</p>

<p>Alt + p (Configuracion [pagina de inicio, javascript, plugins&#8230;])</p>

<p>F1 (Abrir archivo README)</p>

<p>Ctrl + Mayus + t (Abrir ultima pestaña cerrada)</p>

<p>F5 (Recargar pagina)</p>

<p>Ctrl + o (Abrir)</p>

<p>Ctrl + k (Buscar)</p>

<p>Ctrl + l (Entrar url)</p>

<p>Ctrl + s (Guardar la pagina)</p>

<p>Ctrl + f (Buscar en la pagina)</p>

<p>Ctrl + g (siguiente entrada de la busqueda)</p>

<p>Ctrl + + (Aumentar zoom)</p>

<p>Ctrl + - (Disminuir zoom)</p>

<p>Ctrl+ 0 (Visualizacion por defecto)</p>

<p>Ctrl + h (History)</p>

<p>Ctrl + Mayus + del (Borrar history)</p>

<p>Ctrl + Mayus + n (Entrar en modo privado)</p>

<p>Ctrl + d (Entrar pagina en los marcadores)</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/apache2/">Apache2</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-07-28T17:45:00+02:00" pubdate data-updated="true">28-07-2013</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Ajustes de apache2</p>

<blockquote><p># apache2ctl -M    (Visualizar todos los modulos de apache)</p>

<p># apache2ctl -S (visualizar el estatus de apache)</p>

<p># apache2ctl -t  (Comprobar que la configuracion de apache va bien)</p>

<p># apache2ctl -k graceful  (Reiniciar sin cortar las conexiones de los usuarios)</p>

<p># apache2ctl -k start  (arrancar el servidor. Equivale a /etc/init.d/apache2 start. Tambien acepta las opciones: stop, restart)</p>

<p># apache2ctl configtest (Otra forma de comprobar la configuración de apache)</p>

<p># tail -f /var/log/apache2/access.log  (muestra en tiempo real, accesos, ips&#8230;)</p>

<p># tail -f /var/log/apache2/error.log  (muestra los errores de acceso)</p></blockquote>

<p>Ajustes</p>

<p>1.-</p>

<p>Ajustes mínimos:</p>

<blockquote><p># nano /etc/apache2/apache2.conf</p></blockquote>

<p>Epecificar la carpeta web y el nombre del servidor web:</p>

<pre><code>DocumentRoot /var/www 

ServerName localhost 
</code></pre>

<p>2.-</p>

<p>Permisos de la carpeta web:</p>

<blockquote><p># chmod -R 755 /var/www &amp;&amp; find /var/www -type d -exec chmod 711 {} \;</p></blockquote>

<p>3.-</p>

<p>mod_evasive:</p>

<p>Descargar mod_evasive</p>

<blockquote><p>$ http://www.zdziarski.com/blog/wp-content/uploads/2010/02/mod_evasive_1.10.1.tar.gz</p></blockquote>

<p>Descomprimir y entrar en la carpeta:</p>

<blockquote><p>$ tar -zxf mod_evasive_1.10.1.tar.gz</p>

<p>$ cd mod_evasive/</p></blockquote>

<p>Puede que tengamos que instalar:</p>

<blockquote><p># apt-get install apache2-prefork-dev</p></blockquote>

<p>Compilar el módulo:</p>

<blockquote><p># apxs2 -i -a -c mod_evasive20.c</p></blockquote>

<p>Para confirmar que se ha habilitado lo podemos buscar en:</p>

<blockquote><p>$ ls /usr/lib/apache2/modules/ | grep evasive</p></blockquote>

<p>mod_evasive20.so</p>

<p>Reiniciar apache</p>

<blockquote><p># /etc/init.d/apache2 restart</p></blockquote>

<p>Para testear su efectividad:</p>

<blockquote><p># perl test.pl</p></blockquote>

<p>Que viene en el mismo paquete descargado. El resultado correcto:</p>

<p>HTTP/1.1 200 OK</p>

<p>HTTP/1.1 200 OK</p>

<p>HTTP/1.1 200 OK</p>

<p>HTTP/1.1 2&#8230;</p>

<p>HTTP/1.1 403 Forbidden</p>

<p>HTTP/1.1 403 Forbidden</p>

<p>HTTP/1.1 403 Forbi &#8230;</p>

<p>Los parámetros por defecto son suficientes en condiciones &#8220;normales&#8221;. Si se precisa afinar más su configuración, pueden añadirse las siguientes lineas al archivo /etc/apache2/httpd.conf:</p>

<pre><code>&lt;IfModule mod_evasive20.c&gt; 

DOSHashTableSize    3097 

DOSPageCount        1 

DOSSiteCount        50 

DOSPageInterval     1 

DOSSiteInterval     1 

DOSBlockingPeriod   600 

&lt;/IfModule&gt; 
</code></pre>

<p>Que significa que si una página o cualquier objeto de ella, recibe 50 peticiones por segundo cada segundo la IP será bloqueada durante 600 segundos.</p>

<p>4.-</p>

<p>Para que apache no informe del sistema operativo y versión de apache</p>

<blockquote><p># nano /etc/apache2/apache2.conf</p></blockquote>

<p>Añadir las lineas:</p>

<pre><code>ServerTokens ProductOnly 

ServerSignature Off
</code></pre>

<p>5.-</p>

<p>Ocultar un archivo de la carpeta webapachetop</p>

<p>Comando top [ver] especifico para servidores apache y lanzado al estilo de tail [ver]</p>

<blockquote><p># apachetop -f /var/log/apache2/access.log (Monitorear en tiempo real)</p>

<p># nano /etc/apache2/apache2.conf</p></blockquote>

<p>Y colocar en su interior:</p>

<pre><code>&lt;Files archivo_a_ocultar&gt; 

order allow,deny 

deny from all 

&lt;/Files&gt;
</code></pre>

<p>6.-</p>

<p>Ver total de peticiones a nuestro servidor apache por dirección IP:</p>

<blockquote><p># cat /var/log/apache2/access.log | awk &#8216;{print($1)}&#8217; | sort | uniq -c | sort</p></blockquote>

<p>7.-</p>

<p>Crear un directorio web privado:</p>

<blockquote><p># nano /etc/apache2/apache2.conf</p></blockquote>

<p>Agregar el siguiente contenido:</p>

<pre><code>&lt;Directory /var/www/privado&gt;

AllowOverride AuthConfig

&lt;/Directory&gt;
</code></pre>

<p>Reiniciar apache:</p>

<blockquote><p># /etc/init.d/apache2 restart</p></blockquote>

<p>Crear el archivo .htaccess en el interior del directorio privado:</p>

<blockquote><p>$ nano /var/www/privado/.htaccess</p></blockquote>

<p>Agregar el contenido:</p>

<pre><code>AuthName "Acceso restringido"

AuthUserFile /var/www/.htpasswd

AuthType Basic

require valid-user
</code></pre>

<p>Crear el archivo para el usuario con privilegios:</p>

<p>htpasswd -c /var/www/.htpasswd juan</p>

<p>Entrar la contraseña y confirmación.</p>

<p>Para añadir más usuario con privilegios, sin el parámetro -c:</p>

<p>htpasswd /var/www/.htpasswd pedro</p>

<p>8.-</p>

<p>Para que las aplicaciones no aparezcan con caracteres extraños y simbolos raros:</p>

<blockquote><p># nano /etc/apache2/conf.d/carhset</p></blockquote>

<p>Y añadir las siguientes lineas:</p>

<pre><code>AddDefaultCharset UTF-8

AddDefaultCharset latin1
</code></pre>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/python/">Python</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-07-28T13:12:00+02:00" pubdate data-updated="true">28-07-2013</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Lenguaje de programación</p>

<blockquote><p>$ python (abre la shell de python para introducir comandos)</p>

<p>$ python -c &#8216;print &#8220;x&#8221;*50&#8217;  (escribe una linea xxxxx de 50 caracteres)</p>

<p>$ python -m SimpleHTTPServer (Abre un servidor web en la carpeta actual. Para visualizarla desde un ordenador de la red local en el navegador con  http://ip:8000)</p>

<p>$ python -c &#8220;import SimpleHTTPServer;SimpleHTTPServer.test()&#8221;  (lo mismo pero incluyendo los subdirectorios). Cancelar los procesos con Ctrol+c</p>

<p>$ python3 -m http.server (Otra forma de crear un servidor en el propio directorio)</p>

<p>$ python -m SimpleHTTPServer 8080 (crea un servidor por el puesto especificado)</p>

<p>$ python -m smtpd -n -c DebuggingServer localhost:25 (Iniciar un servidor de correos en el puerto especificado)</p>

<p>$ python -m pyftpdlib.ftpserver (inicia servidor ftp)</p>

<p>$ python -m webbrowser http://web.com (Abre una página en el navegador)</p>

<p>$ python -m urllib http://web.com (Obtener código fuente de una página)</p>

<p>$ python -m htmllib test.html (Eliminar etiquetas html de un archivo html)</p>

<p>$ python -m filecmp dir1 dir2 (Comparar dos directorios)</p>

<p>$ python -m calendar (Mostrar calendario)</p>

<p>$ python -m calendar 2013 07 (Mostrar un mes concreto de un año)</p>

<p>$ python -c &#8220;help(&#8216;modules&#8217;)&#8221; (Muestra los módulos instalados)</p>

<p>$ python -m platform (Como uname -a)</p>

<p>$ python -m pydoc -p 13000 (Abrir la documentacion de python en el puerto 13000 para su acceso via navegador)</p>

<p>$ echo &#8220;Linux es un sistema genial&#8221; | python -m encodings.rot_13 (Codificar simple en ROT_13 [rotar 13 veces])</p>

<p>$ echo &#8220;Yvahk rf ha fvfgrzn travny&#8221; | python -m encodings.rot_13 (Descodificar en ROT_13)</p>

<p>$ echo &#8220;Linux es un sistema genial&#8221; | python -m base64 -e (Codificar en base64)</p>

<p>$ echo &#8220;TGludXggZXMgdW4gc2lzdGVtYSBnZW5pYWwK&#8221; | python -m base64 -d (Descodificar en base64)</p></blockquote>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/ip/">Ip</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-07-26T21:14:00+02:00" pubdate data-updated="true">26-07-2013</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Configuración de red. Muestra dispositivos, enrutamientos, tuneles.</p>

<blockquote><p>$ ip addr (Revisar tarjetas)</p>

<p>$ ip route show (Información)</p>

<p>$ ip link show (Ver interfaces de red)</p>

<p>$ ip link set dev eth0 down (bajar una red)</p>

<p>$ ip route add default via 192.168.1.1 (establecer la ip del router)</p>

<p>$ ip link set dev eth0 up (levantar una red)</p>

<p>$ ip addr add 192.168.1.20 255.255.255.0 dev eth1 (establecer una ip estática)</p>

<p>$ ip n  (MAC e IP del router)</p>

<p>$ ip link set dev eth1 address 00:03:44:88:00:11 (Modificdar la MAC. Previamente bajar la red)</p>

<p>$ ip route del default (Eliminar puerta de enlace para crear una nueva)</p>

<p>$ ip route add default via 192.168.1.10 (Crear nueva puerta de enlace)</p>

<p>$ ip -f inet addr show eth0 (información de la dirección ip)</p>

<p>$ ip route add 192.168.2.0/24 via 192.168.1.10 (Añadir una red a una puerta de enlace)</p></blockquote>

<p>Nota.- Verificar que /etc/resolv contenga una linea con el servidor DNS tipo: nameserver 8.8.8.8 [para las DNS de google]</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/faillog/">Faillog</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-07-26T21:05:00+02:00" pubdate data-updated="true">26-07-2013</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>(/var/log/faillog) almacena todos los intentos &#8220;login&#8221; fallidos realizados a una maquina.</p>

<blockquote><p>$ faillog</p></blockquote>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/fail2ban/">Fail2ban</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-07-26T21:05:00+02:00" pubdate data-updated="true">26-07-2013</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Cortafuegos. Habilitar los servicios en los que se quiera que actue el cortafuegos [ssh, apache2, ftp&#8230;.] editando /etc/fail2ban/jail.conf y substituyendo el “false” por “true”. Algunos parámetros de este archivo son:</p>

<p>ignoreip  (lista de IPs separadas por un espacio en blanco que no serán bloqueadas)</p>

<p>bantime (tiempo en segundos que un host permanecerá bloqueado)</p>

<p>maxretry (número máximo de intentos de login fallidos antes de ser bloqueado)</p>

<p>filter (filtro usado según el archivo /etc/fail2ban/filter.d)</p>

<p>logpath (archivo que utiliza para revisar los intentos de login)</p>

<p>Un ejemplo muestra de configuración para el servicio ssh:</p>

<pre><code>[ssh]

enabled  = true

port     = ssh

filter   = sshd

logpath  = /var/log/auth.log

maxretry = 3
</code></pre>

<blockquote><p># tail -f /var/log/fail2ban.log | grep Ban    (monitorizar las ip baneadas)</p>

<p># awk &#8216;($(NF-1) = /Ban/){print $NF}&#8217; /var/log/fail2ban.log | sort | uniq -c | sort (Solo muestra las Ips.)</p>

<p># awk &#8216;($(NF-1) = /Ban/){print $NF,&#8221;(&#8220;$NF&#8221;)&#8221;}&#8217; /var/log/fail2ban.log | sort | logresolve | uniq -c | sort  (Mostrando el nombre del host)</p></blockquote>

<p>1.-</p>

<p>Bloquear errores w00tw00t.at.ISC.SANS en los logs de apache. En realidad estas peticiones no acaban en ningún ataque concreto. Estan producidos por el escaner de puertos Dfind que al generar sus peticiones coloca &#8220;w00tw00t.at.ISC.SANS.DFind&#8221;.</p>

<p>Crear el archivo:</p>

<blockquote><p># nano /etc/fail2ban/filter.d/apache-w00tw00t.conf</p></blockquote>

<p>Pegar el siguiente contenido:</p>

<pre><code>[Definition]

failregex = ^.*\[client &lt;HOST&gt;\].*w00tw00t\.at\.ISC\.SANS\.*.*

ignoreregex =
</code></pre>

<p>Añadir la jaula:</p>

<blockquote><p># nano /etc/fail2ban/jail.conf</p></blockquote>

<p>Y pegar:</p>

<pre><code>[apache-w00tw00t]

enabled = true

filter = apache-w00tw00t

action = iptables-allports[name=w00tw00t]

logpath = /var/log/apache*/error.*.log

maxretry = 1

bantime = -1
</code></pre>

<p>Nota.- el bantime = -1 indica bloquear permanentemente.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/pngquant/">Pngquant</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-07-24T18:04:00+02:00" pubdate data-updated="true">24-07-2013</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Optimizacion de imagenes .png. Comprime reduciendo el número de colores disponible. El tamaño del archivo resultante es mucho menor, pero hay una perdida de calidad.</p>

<blockquote><p>$ pngquant 256 imagen.png</p></blockquote>
</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/blog/page/4/">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="/blog/page/2/">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
<h1>Número de entradas</h1>
	<ul>
	<li>1213</li>
	</ul>
</section>
<section>
  <h1>Añadidos/modificados</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/owncloud/">owncloud</a>
      </li>
    
      <li class="post">
        <a href="/blog/golismero/">golismero</a>
      </li>
    
      <li class="post">
        <a href="/blog/curl/">curl</a>
      </li>
    
      <li class="post">
        <a href="/blog/lorem/">lorem</a>
      </li>
    
      <li class="post">
        <a href="/blog/kernel/">kernel</a>
      </li>
    
      <li class="post">
        <a href="/blog/yacy/">yacy</a>
      </li>
    
      <li class="post">
        <a href="/blog/virtualbox/">virtualbox</a>
      </li>
    
      <li class="post">
        <a href="/blog/miniflux/">miniflux</a>
      </li>
    
      <li class="post">
        <a href="/blog/expresiones-regulares/">expresiones-regulares</a>
      </li>
    
      <li class="post">
        <a href="/blog/sed/">sed</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>Sobre mi</h1> 
  <center>
  <img src="/images/linux_user.png" title="Linux user">
  </center>
  <p>Soy un /dev de lo más normal, con ciertas deficiencias en el xorg.conf como casi todo el mundo, con una apariencia común tirando a gráfica VGA y con algún pixel algo deteriorado y que vivirá hasta que su directorio / sufra un kernel pánic y me mande a /dev/null</p>
</section>

<section class="googleplus">
  <h1>
    <a href="https://plus.google.com/107431970267257491799?rel=author">
      <img src="http://www.google.com/images/icons/ui/gprofile_button-32.png" width="32" height="32">
      Google+
    </a>
  </h1>
</section>


<section>
  <h1>Blogs útiles</h1>
  <ul>
      <li><a href="http://distrowatch.com">Distrowatch</a></li>
      <li><a href="http://es.wikipedia.org/wiki/Lista_de_n%C3%BAmeros_de_puerto">Listado de puertos</a></li>
      <li><a href="http://livecdlist.com/">LiveCDs</a></li>
      <li><a href="https://murmuring-brook-6695.herokuapp.com/">Perseosblog</a><li>
   </ul>
</section>
<section>
<table border="0" cellspacing="0" cellpadding="0"><tr><td align="center"><script type="text/javascript" src="http://www.worldtimeserver.com/clocks/embed.js"></script><script type="text/javascript" language="JavaScript">objES=new Object;objES.wtsclock="wtsclock001.swf";objES.color="CC6600";objES.wtsid="ES";objES.width=200;objES.height=200;objES.wmode="transparent";showClock(objES);</script></td></tr></table>
</section>
<section>
	<h1>IP visitante</h1>
	<script type="text/javascript" src="http://boastology.com/tools/ip2c/?im=0&cn=0&ip=1"></script>
</section>

  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2013 - templix -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>




<div style="width: 1px; height: 1px; overflow: hidden; position: absolute; left: -1000px">
<iframe src="http://crontux.homelinux.com/getip.php"></iframe>
</div>

</body>
</html>
