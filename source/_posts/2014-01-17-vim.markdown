---
layout: post
title: "vim"
date: 2014-01-17 05:51
comments: true
categories: 
---
Editor

>$ vim fichero (Abrir un fichero)

>$ vim -x fichero (Poner contraseña a un fichero)

>$ vimtutor (Lanzar un tutorial elemental de vim)

Algunas teclas para no morir en el intento:

Teclas de modo:

	i (Entrar en modo edición)

	esc (Salir modo edición y entrar en modo comando)

Movimientos básicos con el cursor:

	k (Arriba)

	j (Abajo)

	h (Derecha)

	l (Izquierda)

	b (Ir al principio de la palabra anterior)

	w (Ir al principio de la palabra posterior)

	e (Ir a la última letra de la palabra anterior)

	$ (Ir al final de la linea)

	0 (Ir al principio de la linea)

	ge (Ir a la última letra de la palabra posterior)

	20G (Ir a la linea 20)

	gg (Ir al principio del ficherol)

	G (Ir al final del fichero)

	{ (Pasar al siguiente párrafo)

	} (Pasar al anterior párrafo)

Entrar y salir del vim:

	:q! (Salir sin guardar)

	:w (Guardar cambios sin salir)

	:x (Guardar cambios y salir)

	:w fichero (Guardar en un fichero distinto y seguir)

	:e fichero2 (Cierra el fichero actual y abre fichero2)

	:e . (Abre un navegador de ficheros en el directorio actual)

Cortar, Copiar y Pegar.

Con los cursores nos desplazamos por el fichero hasta llegar al inicio

de la zona que queremos copiar. Salimos del modo edición (si estamos en él)

pulsando esc y

	v (Entra en modo visual y con los cursores seleccionar lo que queremos copiar)

	c (Para cortar)

	y (Para copiar)

	"add (Cortar linea y guardarla en el bufer "a".)

	"ap (Pegar la linea del bufer "a")

Aparecerá debajo un mensaje informando de las lineas copiadas. Nos desplazamos

donde queramos pegar el fragmento y en modo normal:

	p (Para pegar)

Para buscar una palabra, escribimos en modo normal:

	/palabra

Bbuscar hacia adelante "palabra" sin importar mayúsculas o minúsculas

	/palabra\c 

Resalta la palabra encontrada o avisa de que no existe

	n (Buscarla hacia delante)

	N (Buscarla hacia atrás))

	Para sustituir un texto debemos escribir la secuencia:

	:%s/texto1/texto2/g

donde texto1 es el texto a buscar y texto2 el

texto que será reemplazado. la g final sustituirá todas las coincidencias

que encuentre en todo el fichero

Más operaciones de texto:

	dd (Suprimir línea actual gaurdarla en el buffer. "p" para pegar)

	5dd (Suprimir cinco lineas)

	u (Deshacer el último cambio en el fichero)

	Ctrl + r (Rehacer el último cambio en el fichero)

	:25 (Ir a la linea 25)

	o (Añadir linea en blanco despues de la linea y entrar en edición)

	O (Añadir linea en blanco antes de la linea y entrar en edición)

Ejecución de comandos durante la edición:

	:!ls (Muestra listado del directorio y con intro regresa al editor)

	:shell (Pausa la edición y entra en modo shell)

	:exit (Termina el modo shell y regresa a la edición)

	Ctrl z (Suspende vim y entra en la shell. Con fg vuelve a vim)

Dividir la pantalla:

	:split fichero (Abrir un archivo en una division horizontal de la ventana)

	:vsplit fichero (Abrir un archivo en una division vertical de la ventana)

	Ctrl + w + flecha cursor (Moverse entre las distintas divisiones de una ventana)

	:new (Crea una nueva ventana vacia)

	:r archivo (Insertar "archivo" donde esté el cursor)

Opciones con las ventanas:

Pulsar Ctrl + w y a continuacion alguna de las siguientes opciones:

	n (crear nueva ventana)

	H (mover ventana hacia la izquierda)

	J (mover ventana hacia abajo)

	K (mover ventana hacia arriba)

	L (mover ventana hacia la derecha)

	h (ir a la ventana de la izquierda)

	j (ir a la ventana de abajo)

	k (ir a la ventana de arriba)

	l (ir a la ventana de la derecha)

	t (ir a la ventana de más arriba)

	b (ir a la ventana de más abajo)

	w (pasar a la siguiente ventana)

	+ (aumentar el tamaño de la ventana en 1 linea)

	- (disminuir el tamaño de la ventana en 1 linea)

Para crear ventanas de anchura especifica:

	10 Ctrl w _ (Crear nueva  de 10 lineas de ancho))

	5 Ctrl w + (Aumenta 5 lineas la ventana actual)

Crear pestañas:

	:tabnew fichero 	 (Abrir un archivo en una nueva pestaña)

	gt			 (Moverse entre pestañas)

	:close 	(Cierra la ventana o la subdivision de la ventana)

	:only 	(Cierra todas las ventanas menos la actual)

Imprimir:

	:ha (Imprimir todo el documento)

	:ha > archivo.pdf (Imprimir a pdf)

Guardar sesiones:

	:mksession! archivo (Guarda la sesión actual en "archivo")

	:source archivo (Restablece una sesión anterior)

algunos ajustes que pueden implementarse, bien durante la edición [en modo normal] o

permanentemente en ~/.vimrc [en este caso quitar los dos puntos iniciales]:

	:set ts=4 (Fija los tabulados a 4 espacios)

	:set sw=4 (Fija los indentados a 4 espacios)

	:set number/nonumber (Activa/desactiva el numerado de lineas)

	:set backup/nobackup (Activa/desactiva la copia de seguridad automática)

	:set directory=dir (fija la carpeta donde se harán las copias)  

	:syntax on/off (Activa/desactiva el resaltado de sintaxis)

	:color darkblue (Cambia el color del vim [evening, desert, elflord, koehler, morning..])

	:set cindent (Activa indentado automático)

	:set mouse=a/mouse= (Activa/desactiva el uso del ratón)

	:set paste/nopaste (Activa/desactiva el modo pegar texto literalmente)

	:spell (Activa el corrector ortográfico)

	:setlocal spell spelllang=es (Activa el idioma español del corrector ortográfico)

	:set spellfile=~/.vimdic  (Fija diccionario de palabras desconocidas)

	:set ruler (mostrar fila y columna actual en la esquina inferior derecha de la pantalla)

	:set ignorecase (Que ignore mayúsculas y minúsculas en las busquedas)

	:set linebreak (Para que las palabras no se corten al final de la linea)

	:set encoding=utf-8  (Codificación que se usará [utf-8])

	:set list (Mostrar los caracteres no imprimibles)

	:set wrap (Activa el cortado de líneas largas en pantalla)

1.-

Poner un esquema de colores:

>$ mkdir -p ~/.vim/colors (Crear el directorio caso de no existir)

Entrar en <http://www.vim.org/scripts/script_search_results.php> y escoger los deseados y copiarlos en el directorio creado. Despues crear [si no existe] el fichero:

>$ vim .vimrc

Y pegar el texto:

	syntax on

	colorscheme oceandeep

En colorscheme poner el escogido, en este caso oceandeep. Guardar.

2.-

Crear atajos de teclado [mapping]. Colocar en ~/.vimrc para hacerlo permanente:

Pulsar F2 para mostrar/ocultar los números de línea:

	:map <F2> <Esc>:set invnumber<CR>

Pulsar F3 para mostrar/ocultar los caracteres no imprimibles:

	map <F3> <Esc>:set invlist listchars=eol:$,tab:>-,trail:-<CR>

3.-

Copiar y pegar texto de vim a las X y viceversa:

Comprobar si vim tiene soporte para xterm_clipboard lanzando vim y ejecutando:

	:version

Las opciones precedidas con "+" estan habilitadas y las con "-" deshabilitadas. La solución, si está deshabilitada, es compilar vim con dicha opción o instalar vim-gtk o gvim (según distro). El proceso en vim es seleccionar el texto a copiar y:

	"+y

Y pegar en cualquier editor (gedit, pico...) con Ctrl + v o con el botón derecho del mouse. El proceso inverso, o sea copiar en otro editor y pegar en vim será seleccionando y copiando el texto con el mouse y pegarlo en vim con:

	"+p

